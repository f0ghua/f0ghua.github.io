# 证书原理简明


## 预备知识 {#预备知识}

CA 是 Certificate Authority 的缩写，也叫“证书授权中心”。数字证书实际上是存于计算机上的一个记录，是由 CA 签发的一个声明，证明证书主体（“证书申请者”被发放证书后即成为“证书主体”）与证书中所包含的公钥的惟一对应关系。

在进入 CA 的讨论之前，我们先必须对公钥算法有个概念，因为 CA 认证就是使用的公钥算法。公钥算法一般有一对 key，称为私钥(private key)和公钥(public key)。私钥加密的数据需要用公钥来解密，同样公钥加密的也需要用私钥来解密。

一般来说私钥都是妥善保存不为人知的，而公钥会放在证书中发布出去供人使用。


## CA 认证 {#ca-认证}

CA 分为 Signed CA 和 Self Signed CA。两者的差别在于其证书（certificate）被认证的方式不同。

Self Signed CA 是指由自己给自己的 certificate 做签名认证的 CA ，由于一般来讲此类 CA
总是处于 CA 链的最顶端，所以又叫 Root CA。

Signed CA 是指 certificate 由其他 CA 进行签名认证的 CA。而认证它的 CA，我们称为 Signed
CA 的上层 CA，也叫 Parent CA；而 Signed CA 则称为 Sub CA 或 Child CA。

在更深入了解 CA 的原理前，先说明几个组成元素

-   私钥(key - private key)
-   证书请求(csr - certificate signing request)
-   签名证书(crt - certificate signed request)

然后我们举例来说明 CA 认证的一个过程。

小明和小王想要互相交换信息，但是又害怕有人在中间冒充，所以使用了如下的方式

-   小明首先创建了一对 key 。即公钥（public key）和私钥（private key）。私钥妥善保存了起来。
-   然后小明提交了一个证书请求（其中包含了小明的 public key）给某个大家都认可的证书授权中心（CA）去做认证
-   CA 签署了证书请求并颁发了一个新的证书给小明。跟公钥一样，小明可以把这个证书发布给公众。
-   小王下载了 CA 的数字证书。这个数字证书里面就包含了 CA 的公钥。小王可以用这个数字证书里的公钥来验证小明的数字证书，保证小明的证书的确是由 CA 颁发的。
-   小明给小王发送了他的数字证书，其中包含了小明的公钥。小王用 CA 的数字证书验证小明的数字证书，并获得了小明的公钥。
-   同样的方式，小明也可以验证小王的数字证书，并获得小王的公钥。
-   注意，在此过程中如果有人在中间伪造了数字证书发给小王或者小明，那么 CA 的数字证书验证就无法通过，从而防止了中间人攻击。
-   这样，小明和小王都可以通过对方的公钥来解密对方私钥加密发送过来的数据了。

