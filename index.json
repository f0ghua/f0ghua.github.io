[{"categories":null,"content":"LUCI å®‰è£… $ ./scripts/feeds update packages luci $ ./scripts/feeds install -a -p luci $ make menuconfig LUCI Collections luci ","date":"2022-08-04","objectID":"/openwrt-luci/:1:0","tags":null,"title":"openwrt LUCIå·¥ä½œåŸç†æµ…æ","uri":"/openwrt-luci/"},{"categories":null,"content":"LUCI çš„å·¥ä½œåŸç† é¦–å…ˆè¯´æ˜ï¼Œè¿™é‡Œåˆ†æçš„ç‰ˆæœ¬ä¸º openwrt-21.02.3 LUCI å¯ä»¥ç†è§£ä¸º lua + UCI ã€‚æ˜¯ç”¨ lua å®ç°çš„è¯»å†™ UCI é…ç½®çš„ä¸€ä¸ªæ¡†æ¶ã€‚è¿™ä¸ªæ¡†æ¶é…åˆ uhttpd å¯ä»¥å®ç°ç®€å•å¿«é€Ÿçš„é¡µé¢å¼€å‘å’Œè®¿é—®é…ç½®ã€‚ åœ¨ openwrt ä¸­ï¼Œé»˜è®¤ uhttpd çš„å¯åŠ¨å‚æ•°å¦‚ä¸‹ /usr/sbin/uhttpd -f -h /www -r OpenWrt -x /cgi-bin -u /ubus -t 60 -T 30 -k 20 -A 1 -n 3 -N 100 -R -p 0.0.0.0:80 -p [::]:80 ","date":"2022-08-04","objectID":"/openwrt-luci/:2:0","tags":null,"title":"openwrt LUCIå·¥ä½œåŸç†æµ…æ","uri":"/openwrt-luci/"},{"categories":null,"content":"é¡µé¢æ˜¾ç¤º ä»¥è®¿é—®ä¸»é¡µé¢ä¸ºä¾‹ã€‚è®¿é—®çš„é¡µé¢ä¸º http://192.168.1.1/ ï¼Œæ­¤æ—¶è®¿é—®çš„æ˜¯ uhttpd æä¾›çš„ 80 ç«¯å£å¼€æ”¾çš„æœåŠ¡ã€‚ æŸ¥çœ‹ uhttpd çš„é…ç½®æ–‡ä»¶ /etc/config/uhttpd å¯ä»¥çŸ¥é“ root@OpenWrt:/# cat /etc/config/uhttpd config uhttpd 'main' list listen_http '0.0.0.0:80' list listen_http '[::]:80' list listen_https '0.0.0.0:443' list listen_https '[::]:443' option redirect_https '0' option home '/www' option rfc1918_filter '1' option max_requests '3' option max_connections '100' option cert '/etc/uhttpd.crt' option key '/etc/uhttpd.key' option cgi_prefix '/cgi-bin' list lua_prefix '/cgi-bin/luci=/usr/lib/lua/luci/sgi/uhttpd.lua' option script_timeout '60' option network_timeout '30' option http_keepalive '20' option tcp_keepalive '1' option ubus_prefix '/ubus' config cert 'defaults' option days '730' option key_type 'ec' option bits '2048' option ec_curve 'P-256' option country 'ZZ' option state 'Somewhere' option location 'Unknown' option commonname 'OpenWrt' é»˜è®¤è¯»å–çš„åº”è¯¥æ˜¯ /www ï¼ˆhome ç›®å½•ï¼‰ä¸‹çš„ index.html æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶åŒ…å«ä»¥ä¸‹è¯­å¥ \u003cmeta http-equiv=\"refresh\" content=\"0; URL=cgi-bin/luci/\" /\u003e æ‰€ä»¥ä¼šè¢«è‡ªåŠ¨å¯¼å‘ /cgi-bin/luci/ ã€‚è€Œä» /etc/config/uhttpd æ–‡ä»¶ä¸­çš„ list\rlua_prefix è®¾ç½®å¯ä»¥çŸ¥é“å½“è§£æåˆ° url å­—ä¸²ä¸º /cgi-bin/luci çš„æ—¶å€™ä¼šè½¬ç»™ lua è„šæœ¬ /usr/lib/lua/luci/sgi/uhttpd.lua æ¥å¤„ç†ã€‚ çœ‹çœ‹é‡Œé¢çš„ä¸»è¦å†…å®¹ require \"luci.dispatcher\" function handle_request(env) local x = coroutine.create(luci.dispatcher.httpdispatch) å¯ä»¥çœ‹åˆ°åœ¨è·å¾— http çš„ request ä¹‹ååˆè½¬ç»™ /usr/lib/lua/luci/dispatcher.lua é‡Œé¢çš„ httpdispatch å‡½æ•°å¤„ç†å»äº†ï¼Œæœ€ç»ˆæ‰§è¡Œçš„æ˜¯å‡½æ•° dispatch ã€‚ function httpdispatch(request, prefix) local stat, err = util.coxpcall(function() dispatch(context.request) end, error500) function dispatch(request) local menu = menu_json() local page = menu -- åˆ†æ /usr/share/luci/menu.d/*.json æ–‡ä»¶ï¼Œè·å¾—é¡µé¢çš„èŠ‚ç‚¹æ ‘ if action.type == \"view\" then elseif action.type == \"call\" then elseif action.type == \"firstchild\" then -- ... -- æ ¹æ®èŠ‚ç‚¹é‡Œé¢çš„actionå±æ€§åšç›¸åº”çš„å¤„ç† dispatch å‡½æ•°ä¼šå…ˆæ ¹æ®ç›®å½• /usr/share/luci/menu.d/ ä¸‹çš„å†…å®¹äº§ç”ŸèŠ‚ç‚¹æ ‘ï¼Œç„¶åç”±å¸¦è¿›æ¥çš„ request æ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹ï¼Œæ ¹æ® action.type å†ä½œç›¸åº”çš„å¤„ç†ï¼Œå°†è¯·æ±‚çš„é¡µé¢è¿”å›ç»™å®¢æˆ·ç«¯æµè§ˆå™¨ã€‚ ç”±äº action.type ä¸º view å’Œ firstchild çš„æƒ…å½¢æ¯”è¾ƒå…¸å‹ï¼Œæ‰€ä»¥è¿™é‡Œåªåˆ†æè¿™ä¸¤ç§çš„å¤„ç†è¿‡ç¨‹ã€‚ç†è§£äº†è¿™ä¸¤ç§ï¼Œå…¶ä»–çš„ä¹Ÿå°±å¾ˆå®¹æ˜“çœ‹æ‡‚äº†ã€‚ action.type == view å…ˆæ¥çœ‹çœ‹ action.type == view çš„æƒ…å†µ ã€‚æ¯”å¦‚è®¿é—®è·¯å¾„ä¸º http://192.168.1.111/cgi-bin/luci/admin/system ï¼Œåœ¨æ–‡ä»¶ /usr/share/luci/menu.d/luci-mod-system.json ä¸­å®šä¹‰çš„è·¯å¾„å¦‚ä¸‹: \"admin/system/system\": { \"title\": \"System\", \"order\": 1, \"action\": { \"type\": \"view\", \"path\": \"system/system\" }, \"depends\": { \"acl\": [ \"luci-mod-system-config\" ] } }, å½“è®¿é—®è¯¥é¡µé¢æ—¶ï¼ˆ èœå• System-\u003eSystem ï¼‰ï¼Œlua è„šæœ¬çš„è°ƒè¯•è¾“å‡ºå¦‚ä¸‹ï¼ˆè°ƒè¯•çš„æ–¹æ³•è§åé¢ç« èŠ‚ï¼‰ï¼š root@OpenWrt:/usr/lib/lua/luci# :\u003e/tmp/luci.output \u0026\u0026 tail -f /tmp/luci.output [09:48:00]: dispatcher.lua httpdispatch enter, pathinfo = /admin/system/system [09:48:00]: dispatch enter [09:48:00]: init_template_engine enter, media = /luci-static/bootstrap [09:48:00]: Template.__init__ enter, name = themes/bootstrap/header [09:48:00]: sourcefile =/usr/lib/lua/luci/view/themes/bootstrap/header.htm [09:48:00]: Template.__init__ exit [09:48:00]: init_template_engine after Template themes/bootstrap/header [09:48:00]: init_template_engine exit [09:48:00]: dispatch action = { type = 'view' path = 'system/system' } [09:48:00]: Template.__init__ enter, name = view [09:48:00]: sourcefile =/usr/lib/lua/luci/view/view.htm [09:48:00]: Template.__init__ exit [09:48:00]: Template.render enter, scope = { view = 'system/system' } [09:48:00]: Template.__init__ enter, name = header [09:48:00]: sourcefile =/usr/lib/lua/luci/view/header.htm [09:48:00]: Template.__init__ exit [09:48:00]: Template.render enter, scope = { } [09:48:00]: Template.__init__ enter, name = themes/bootstrap/header [09:48:00]: Template.__init__ exit [09:48:00]: Template.render enter, scope = { } [09:48:00]: Template.render exit [09:48:00]: Template.render exit [09:48:00]: Template.__init__ enter, name = footer [09:48:00]: sourcefile =/usr/lib/lua/luci/view/footer.htm [09:48:00]: Template.__init__ exit [09:48:00]: Template.render enter, scope = { } [09:48:00]: Template.__init__ enter, name = themes/bootstrap/footer [09:48:00]: sourcefile =/usr/lib/lua/luci/view/themes/bootstrap/footer.htm [09:48:00]: Template.__init__ exit [09:48:00]: Template.render enter, scope = { ","date":"2022-08-04","objectID":"/openwrt-luci/:2:1","tags":null,"title":"openwrt LUCIå·¥ä½œåŸç†æµ…æ","uri":"/openwrt-luci/"},{"categories":null,"content":"é¡µé¢è®¾ç½® æ˜¾ç¤ºçš„éƒ¨åˆ†æ¸…æ¥šäº†ï¼Œé‚£ä¹ˆè®¾ç½®å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬åœ¨é¡µé¢ä¸Šä¿®æ”¹äº†ä¸€äº›å‚æ•°ï¼Œç‚¹å‡» Save æˆ–è€… Save \u0026 Apply æŒ‰é’®ï¼Œåˆå‘ç”Ÿäº†äº›ä»€ä¹ˆï¼Ÿ ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼šluci é€šè¿‡ ubus è°ƒç”¨ rpcd çš„ uci commitï¼Œç„¶å rpcd å‘å‡º ubus çš„ config.change eventã€‚ å½“ç‚¹å‡»æŒ‰é’® Apply unchecked æˆ–è€… Save \u0026 Apply çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šå‘é€ action_apply_unchecked æˆ–è€… action_apply_rollback çš„ request ç»™æœåŠ¡å™¨ã€‚æ ¹æ® /usr/share/luci/menu.d/luci-base.json çš„é…ç½®ï¼Œä¼šè°ƒç”¨ /usr/lib/lua/luci/controller/admin/uci.lua ä¸­çš„å‡½æ•° action_apply_unchecked æˆ–è€…å‡½æ•° action_apply_rollback ï¼Œä¹‹åä¼šè°ƒç”¨ /usr/lib/lua/luci/model/uci.lua ä¸­çš„ apply å‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šè°ƒç”¨ â€˜ubus call uci applyâ€™ï¼Œä»è€Œè½¬åˆ° rpcdã€‚ æ¥ä¸‹æ¥å°±ä¼šè°ƒç”¨åˆ° rpcd/uci.c ä¸­çš„å‡½æ•° rpc_uci_apply ï¼Œè°ƒç”¨ rpc_uci_apply_config ï¼Œæœ€ç»ˆæ‰§è¡Œäº†å‡½æ•° rpc_uci_trigger_event ï¼Œä¸ºæ¯ä¸ªæäº¤çš„é…ç½®å‘å‡ºå¯¹åº”çš„ ubus çš„ config.change äº‹ä»¶ã€‚ ä»¥ firewall ä¸ºä¾‹ã€‚åœ¨ /etc/init.d/firewall è„šæœ¬ä¸­ï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œé€šè¿‡ procd_add_reload_trigger firewall ç”± procd å‘ ubus æ³¨å†Œ config.change eventã€‚ä¸€æ—¦ ubus æ”¶åˆ° config.change äº‹ä»¶ï¼Œå°†è§¦å‘ /etc/init.d/firewall reload _procd_add_reload_trigger() { local script=$(readlink \"$initscript\") local name=$(basename ${script:-$initscript}) local file _procd_open_trigger for file in \"$@\"; do _procd_add_config_trigger \"config.change\" \"$file\" /etc/init.d/$name reload done _procd_close_trigger } ","date":"2022-08-04","objectID":"/openwrt-luci/:2:2","tags":null,"title":"openwrt LUCIå·¥ä½œåŸç†æµ…æ","uri":"/openwrt-luci/"},{"categories":null,"content":"FAQ ","date":"2022-08-04","objectID":"/openwrt-luci/:3:0","tags":null,"title":"openwrt LUCIå·¥ä½œåŸç†æµ…æ","uri":"/openwrt-luci/"},{"categories":null,"content":"ä»€ä¹ˆæ˜¯ CBI ? CBI æ˜¯ Configuration Bind Interface çš„ç¼©å†™ã€‚åœ¨ è€çš„æºç  ä¸­æœ‰ä»¥ä¸‹è¯´æ˜ Description: Offers an interface for binding configuration values to certain data types. Supports value and range validation and basic dependencies. ç®€å•çš„ç†è§£ï¼ŒCBI å°±æ˜¯ä¸€ä¸ªåº“ï¼Œæä¾›äº†ä¸€ç³»åˆ—çš„æ¥å£ç”¨æ¥åœ¨ UCI çš„é…ç½®æ–‡ä»¶å’Œç›¸å…³çš„è¯­è¨€ï¼ˆlua æˆ–è€… jsï¼‰çš„å¯¹è±¡ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚ ","date":"2022-08-04","objectID":"/openwrt-luci/:3:1","tags":null,"title":"openwrt LUCIå·¥ä½œåŸç†æµ…æ","uri":"/openwrt-luci/"},{"categories":null,"content":"ä¸ºä»€ä¹ˆ LUCI æä¾›äº† 2 å¥— API? ç¿»çœ‹ luci çš„å®˜æ–¹è¯´æ˜æ–‡æ¡£ï¼Œä¼šå‘ç°æä¾›äº† 2 å¥— apiã€‚ä¸€å¥—æ˜¯ lua çš„ï¼Œä¸€å¥—æ˜¯ js çš„ã€‚ æ ¹æ®èµ„æ–™ï¼Œæœ€åˆ luci çš„è®¾è®¡æ˜¯é€šè¿‡ lua è„šæœ¬æ¥ç”Ÿæˆç•Œé¢å…ƒç´ ï¼ˆåç«¯ï¼‰ï¼Œåæ¥è€ƒè™‘åˆ°æ•ˆç‡é—®é¢˜ï¼ŒæŠŠé¡µé¢çš„ç”Ÿæˆè½¬ç§»åˆ°åˆ°äº†å®¢æˆ·ç«¯æµè§ˆå™¨ï¼ˆå‰ç«¯ï¼‰ï¼Œæ‰€ä»¥æ”¹æˆäº† js çš„æ–¹å¼ã€‚ ","date":"2022-08-04","objectID":"/openwrt-luci/:3:2","tags":null,"title":"openwrt LUCIå·¥ä½œåŸç†æµ…æ","uri":"/openwrt-luci/"},{"categories":null,"content":"æœ‰å“ªäº›ç›¸å…³çš„ç›®å½•ï¼Ÿ ä» openwrt å¼€å‘æ¿çš„è§’åº¦æ¥çœ‹ï¼Œæœ‰ä»¥ä¸‹çš„ç›¸å…³ç›®å½•æˆ–æ–‡ä»¶ /usr/share/luci/menu.d å­˜æ”¾èœå•é…ç½® /usr/share/luci/menu.d/luci-base.json [admin/status, type: firstchild] /usr/share/luci/menu.d/luci-mod-status.json [admin/status/overview, type: template, path: admin_status/index] /usr/lib/lua/luci/view/admin_status/index.htm [admin/status/iptables, type: view, path: status/iptables] luci-static/resources/view/status/iptables.js /www luci-static/resources/view å­˜æ”¾é¡µé¢å¯¹åº”çš„ js æ–‡ä»¶ /usr/lib/lua/luci /usr/lib/lua/luci/model åŠ¨æ€è·å–æ•°æ®çš„ lua è„šæœ¬ /usr/lib/lua/luci/view htm æ ¼å¼çš„é™æ€ç½‘é¡µæ–‡ä»¶ ","date":"2022-08-04","objectID":"/openwrt-luci/:3:3","tags":null,"title":"openwrt LUCIå·¥ä½œåŸç†æµ…æ","uri":"/openwrt-luci/"},{"categories":null,"content":"LUCI çš„ theme æ˜¯æ€ä¹ˆåº”ç”¨çš„ï¼Ÿ ç›¸å…³çš„ç›®å½•æœ‰ /usr/lib/lua/luci/view/themes/\u003cthemes-name\u003e å­˜æ”¾ header.htm å’Œ footer.htm /www/luci-static/\u003cthemes-name\u003e å­˜æ”¾ç›¸å…³çš„ css, js, image ç­‰ /etc/uci-defaults /etc/config/luci ä¸¾ä¾‹ï¼Œä½ æ–°åˆ›å»ºäº†ä¸€ä¸ªä¸»é¢˜ï¼Œåå­—å« vodacomï¼Œé‚£ä¹ˆé€šè¿‡ä»¥ä¸‹æŒ‡ä»¤å¯ä»¥åˆ‡è¿‡å» uci set luci.main.mediaurlbase=/luci-static/vodacom uci commit luci è¦æ¢å¤æˆè€çš„ç•Œé¢ï¼Œåªéœ€è¦ uci set luci.main.mediaurlbase=/luci-static/bootstrap uci commit luci ","date":"2022-08-04","objectID":"/openwrt-luci/:3:4","tags":null,"title":"openwrt LUCIå·¥ä½œåŸç†æµ…æ","uri":"/openwrt-luci/"},{"categories":null,"content":"ä¿®æ”¹åå¦‚ä½•æ›´æ–°ï¼Ÿ åˆ é™¤ cache rm -rf /tmp/luci-* ç„¶åé€šè¿‡ä»¥ä¸‹å‘½ä»¤ç¦æ­¢ cacheï¼Œè¿™æ ·ä»¥åå°±ä¸ç”¨åˆ é™¤ cache äº† uci set luci.ccache.enable=0; uci commit luci ","date":"2022-08-04","objectID":"/openwrt-luci/:3:5","tags":null,"title":"openwrt LUCIå·¥ä½œåŸç†æµ…æ","uri":"/openwrt-luci/"},{"categories":null,"content":"è°ƒè¯• luci çš„å…³é”®åŠŸèƒ½å¾ˆå¤šéƒ½æ˜¯åœ¨ lua è„šæœ¬ä¸­å®ç°çš„ã€‚å› æ­¤ä¸ºäº†èƒ½è¿›è¡Œè°ƒè¯•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç›®å½• /usr/lib/lua/luci ä¸­æ·»åŠ æ–‡ä»¶ log.lua ï¼Œå†…å®¹å¦‚ä¸‹ local M = {} local tconcat = table.concat local tinsert = table.insert local srep = string.rep local function local_print(str) local dbg = io.open(\"/tmp/luci.output\", \"a+\") local str = str or \"\" if dbg then dbg:write(str..'\\n') dbg:close() end end function M.print(...) local dbg = io.open(\"/tmp/luci.output\", \"a+\") if dbg then dbg:write(os.date(\"[%H:%M:%S]: \")) for _, o in ipairs({...}) do dbg:write(tostring(o)..' ') end dbg:write(\"\\n\") dbg:close() end end function M.print_r(data, depth) local depth = depth or 3 local cstring = \"\"; local top_flag = true local function table_len(t) local i = 0 for k, v in pairs(t) do i = i + 1 end return i end local function tableprint(data,cstring, local_depth) if data == nil then local_print(\"core.print data is nil\"); end local cs = cstring .. \" \"; if top_flag then local_print(cstring ..\"{\"); top_flag = false end if(type(data)==\"table\") then for k, v in pairs(data) do if type(v) ~= \"table\" then if type(v) == \"string\" then local_print(cs..tostring(k)..\" = \"..\"'\"..tostring(v)..\"'\"); else local_print(cs..tostring(k)..\" = \"..tostring(v)); end elseif table_len(v) == 0 then local_print(cs..tostring(k)..\" = \"..\"{}\") elseif local_depth \u003c depth then local_print(cs..tostring(k)..\" = {\"); tableprint(v,cs,local_depth+1); else local_print(cs..tostring(k)..\" = \"..\"{*}\") end end else local_print(cs..tostring(data)); end local_print(cstring ..\"}\"); end tableprint(data,cstring,0); end return M ç„¶åç”¨ç±»ä¼¼ä»¥ä¸‹çš„æ–¹å¼ä½¿ç”¨ã€‚æ¯”å¦‚åœ¨ dispatcher.lua çš„å¼€å¤´æ·»åŠ  local log = require \"luci.log\" åœ¨å‡½æ•° dispatch ä¸­æ‰“å° log.print(\"action.type =\"..action.type) log.print_r(action) è¿™æ ·åœ¨åˆ·æ–°é¡µé¢æ—¶ï¼Œç”¨ä»¥ä¸‹å‘½ä»¤å°±å¯ä»¥çœ‹åˆ°è°ƒè¯•è¾“å‡ºäº† tail -f /tmp/luci.output æ³¨æ„å¦‚æœçœ‹ä¸åˆ°è¾“å‡ºï¼Œé‚£å¯èƒ½æ˜¯ä½ çš„ cache æ²¡æœ‰ç¦ç”¨æˆ–æ¸…é™¤ã€‚ å¦‚æœè°ƒè¯•çš„æ—¶å€™è¦è·å–å½“å‰æ–‡ä»¶åï¼Œå¯ä»¥ç”¨ä»¥ä¸‹å‡½æ•° function __FILE__() return debug.getinfo(2, 'S').source:match(\"^.+/(.+)$\") end ","date":"2022-08-04","objectID":"/openwrt-luci/:4:0","tags":null,"title":"openwrt LUCIå·¥ä½œåŸç†æµ…æ","uri":"/openwrt-luci/"},{"categories":null,"content":"å‚è€ƒ luci_tutorials https://github.com/openwrt/luci/tree/master/docs https://openwrt.org/docs/guide-developer/luci http://openwrt.github.io/luci/jsapi/index.html Howto write new LuCI apps Example to convert lua to js HowTo: Setting up a Development Environment LuCIå…¥é—¨ LuCIä¹‹CBI LuCIä¹‹UCI OpenWrtè¾¾äººæ•™ç¨‹ä¹‹å¼€å‘äººå‘˜å…¥é—¨æŒ‡å— ","date":"2022-08-04","objectID":"/openwrt-luci/:5:0","tags":null,"title":"openwrt LUCIå·¥ä½œåŸç†æµ…æ","uri":"/openwrt-luci/"},{"categories":null,"content":"æ¦‚è¿° ä½¿ç”¨ proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿæ¥åœ¨å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´äº¤æ¢æ•°æ®åº”è¯¥æ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§æ–¹å¼äº†ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ /proc ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„æ–‡ä»¶ï¼Œé€šè¿‡è¯»å†™è¿™ä¸ªæ–‡ä»¶å®ç°ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´çš„æ•°æ®äº¤äº’ã€‚ éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œè™½ç„¶è¿™é‡Œæˆ‘ä»¬åªè®¨è®º procfsï¼Œä½†æ˜¯åœ¨åœ¨æ–°ä¸€äº›çš„ linux kernel ä¸­æˆ‘ä»¬åº”è¯¥ä½¿ç”¨ sysfs æ¥æ›¿ä»£ procfs ä½œä¸º driver å’Œ user space çš„æ¥å£ã€‚ ","date":"2022-08-01","objectID":"/linux_proc/:1:0","tags":["kernel"],"title":"å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´é€šä¿¡ - proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ","uri":"/linux_proc/"},{"categories":null,"content":"ä»£ç ç¤ºä¾‹ åºŸè¯ä¸å¤šè¯´ï¼Œå…ˆä¸Šä¾‹å­ã€‚ï¼ˆä¾‹å­æ˜¯åŸºäº linux 3.9.9 æµ‹è¯•çš„ï¼Œä½†æ˜¯ç†è®ºä¸Šé€‚ç”¨äºåˆ°ç›®å‰ä¸ºæ­¢çš„æ‰€æœ‰ kernel ç‰ˆæœ¬ï¼‰ /* * procfs1.c */ #include \u003clinux/kernel.h\u003e /* We're doing kernel work */#include \u003clinux/module.h\u003e /* Specifically, a module */#include \u003clinux/proc_fs.h\u003e /* Necessary because we use the proc fs */#include \u003clinux/uaccess.h\u003e /* for copy_from_user */#include \u003clinux/version.h\u003e #if LINUX_VERSION_CODE \u003e= KERNEL_VERSION(5, 6, 0) #define HAVE_PROC_OPS #endif #if LINUX_VERSION_CODE \u003c KERNEL_VERSION(3, 10, 0) #define HAVE_PROC_READ_SUITE #endif #define PROCFS_MAX_SIZE 1024 #define PROCFS_NAME \"pbuf\" /* This structure hold information about the /proc file */ static struct proc_dir_entry *our_proc_file; /* The buffer used to store character for this module */ static char procfs_buffer[PROCFS_MAX_SIZE]; /* The size of the buffer */ static unsigned long procfs_buffer_size = 0; static ssize_t procfile_read(struct file *file, const char __user *buff, size_t len, loff_t *off) { int plen = procfs_buffer_size; ssize_t ret = plen; if (*off \u003e= plen || copy_to_user(buff, procfs_buffer, plen)) { pr_info(\"copy_to_user failed\\n\"); ret = 0; } else { pr_info(\"procfile read %s\\n\", file-\u003ef_path.dentry-\u003ed_name.name); *off += plen; } return ret; } /* cat /dev/zero | tr \"\\0\" \"a\" | dd of=/tmp/1.txt bs=1023 count=1 cat /tmp/1.txt \u003e /proc/pbuf */ static ssize_t procfile_write(struct file *file, const char __user *buff, size_t len, loff_t *off) { procfs_buffer_size = len; if (procfs_buffer_size \u003e PROCFS_MAX_SIZE) procfs_buffer_size = PROCFS_MAX_SIZE; if (copy_from_user(procfs_buffer, buff, procfs_buffer_size)) { pr_info(\"copy_from_user failed\\n\"); return -EFAULT; } /* supports only max to 1023 bytes string */ procfs_buffer[procfs_buffer_size \u0026 (PROCFS_MAX_SIZE - 1)] = '\\0'; pr_info(\"procfile write %s\\n\", procfs_buffer); return procfs_buffer_size; } #ifdef HAVE_PROC_OPS static const struct proc_ops proc_file_fops = { .proc_read = procfile_read, .proc_write = procfile_write, }; #else static const struct file_operations proc_file_fops = { .read = procfile_read, .write = procfile_write, }; #endif static int __init procfs1_init(void) { our_proc_file = proc_create(PROCFS_NAME, 0644, NULL, \u0026proc_file_fops); if (NULL == our_proc_file) { #ifdef HAVE_PROC_READ_SUITE remove_proc_entry(PROCFS_NAME, NULL); #else proc_remove(our_proc_file); #endif pr_alert(\"Error:Could not initialize /proc/%s\\n\", PROCFS_NAME); return -ENOMEM; } pr_info(\"/proc/%s created\\n\", PROCFS_NAME); return 0; } static void __exit procfs1_exit(void) { #ifdef HAVE_PROC_READ_SUITE remove_proc_entry(PROCFS_NAME, NULL); #else proc_remove(our_proc_file); #endif pr_info(\"/proc/%s removed\\n\", PROCFS_NAME); } module_init(procfs1_init); module_exit(procfs1_exit); MODULE_LICENSE(\"GPL\"); ä¸ºäº†æµ‹è¯•æ–¹ä¾¿ Makefile ä¹Ÿéšæ‰‹è´´ä¸€ä¸‹ï¼Œæ³¨æ„è·¯å¾„è‡ªå·±å®šä¹‰ KERNEL_DIR= ARCH= CROSS_COMPILE= obj-m += procfs1.o ccflags-y := -g -DDEBUG .PHONY: all clean PWD := $(CURDIR) all: $(MAKE) -C '$(KERNEL_DIR)' M='$(PWD)' ARCH=$(ARCH) CROSS_COMPILE=$(CROSS_COMPILE) V=1 modules clean: $(MAKE) -C '$(KERNEL_DIR)' M='$(PWD)' clean ç¼–è¯‘åä¼šç”Ÿæˆæ¨¡å—æ–‡ä»¶ procfs1.ko ã€‚åœ¨å¯¹åº”çš„ linux guest æœºå™¨ä¸Šæµ‹è¯• $ insmod procfs1.ko $ echo 'HelloWorld!' \u003e /proc/pbuf procfile write HelloWorld! $ cat /proc/pbuf procfile read pbuf HelloWorld! copy_to_user failed copy_to_user failed ","date":"2022-08-01","objectID":"/linux_proc/:2:0","tags":["kernel"],"title":"å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´é€šä¿¡ - proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ","uri":"/linux_proc/"},{"categories":null,"content":"ä½¿ç”¨è¯´æ˜ ","date":"2022-08-01","objectID":"/linux_proc/:3:0","tags":["kernel"],"title":"å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´é€šä¿¡ - proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ","uri":"/linux_proc/"},{"categories":null,"content":"å…³é”®æ¥å£å‡½æ•°å’Œç»“æ„ ä»ä¸Šä¾‹å¯ä»¥çœ‹å‡ºï¼Œåˆ›å»ºä¸€ä¸ª proc è™šæ‹Ÿæ–‡ä»¶åŒ…å«äº†ä»¥ä¸‹çš„å‡ ä¸ªæ­¥éª¤ å®šä¹‰ä¸€ä¸ª struct proc_ops æˆ–è€… struct file_operations çš„å®ä¾‹ï¼Œread å’Œ write çš„å‡½æ•°æŒ‡å‘è‡ªå®šä¹‰çš„ procfile_read å’Œ procfile_write å›è°ƒå‡½æ•° è°ƒç”¨å‡½æ•° proc_create åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ï¼Œå¹¶å°†å‚æ•° proc_fops å¯¹åº”çš„ struct\rfile_operations å®ä¾‹ä¸ä¹‹å…³è” å®ç°è¯»å†™çš„å›è°ƒå‡½æ•° procfile_read å’Œ procfile_write åœ¨æ¨¡å—é€€å‡ºæ—¶ï¼Œè°ƒç”¨å‡½æ•° remove_proc_entry æˆ–è€… proc_remove å°† proc è™šæ‹Ÿæ–‡ä»¶åˆ é™¤ å¯¹åº”çš„å‡ ä¸ªå‡½æ•°éƒ½å¯ä»¥åœ¨å¤´æ–‡ä»¶ include/linux/proc_fs.h ä¸­æ‰¾åˆ°å£°æ˜ struct proc_dir_entry *proc_create_data(const char *name, umode_t mode, struct proc_dir_entry *parent, const struct file_operations *proc_fops, void *data); static inline struct proc_dir_entry *proc_create(const char *name, umode_t mode, struct proc_dir_entry *parent, const struct file_operations *proc_fops) { return proc_create_data(name, mode, parent, proc_fops, NULL); } extern void remove_proc_entry(const char *name, struct proc_dir_entry *parent); ä¸»è¦çš„æ•°æ®ç»“æ„åˆ™æ˜¯ struct proc_dir_entry struct proc_dir_entry { // ... const struct inode_operations *proc_iops; const struct file_operations *proc_dir_ops; // ... }; struct file_operations { // ... ssize_t (*read) (struct file *, char __user *, size_t, loff_t *); ssize_t (*write) (struct file *, const char __user *, size_t, loff_t *); // ... }; ä»ä¸Šé¢çš„åˆ†æå¯ä»¥çŸ¥é“ï¼Œæœ€é‡è¦çš„å°±æ˜¯ procfile_read å’Œ procfile_write ä¸¤ä¸ªå›è°ƒå‡½æ•°äº†ã€‚write å‡½æ•°çš„å‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š /* procfile_writeå‡½æ•°å°†æ•°æ®ä»ç”¨æˆ·ç©ºé—´çš„buff ä¸­æ‹·è´åˆ°æ–‡ä»¶çš„ (*off) ä½ç½®å¤„ã€‚ file: [IN] æ–‡ä»¶æŒ‡é’ˆ buff: [IN] éœ€è¦å†™å…¥æ–‡ä»¶çš„æ•°æ®èµ·å§‹æŒ‡é’ˆã€‚æ³¨æ„è¿™ä¸ªbuffæ˜¯åœ¨user spaceçš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ ç”¨copy_from_user æ‹·è´åˆ°å†…æ ¸ç©ºé—´ã€‚åŒæ—¶éœ€è¦æ³¨æ„ copy_from_user å‡½æ•°è¿”å›çš„æ˜¯ è¿˜æ²¡æœ‰è¢«æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´å»çš„æ•°æ®é•¿åº¦ï¼Œè€Œä¸æ˜¯åƒä¸€èˆ¬çš„è¿”å›æ‹·è´æˆåŠŸçš„é•¿åº¦ã€‚ len: [IN] éœ€è¦å†™å…¥çš„æ•°æ®é•¿åº¦ off: [IN/OUT] è¡¨ç¤ºæ–‡ä»¶çš„åç§»åœ°å€offsetã€‚æ•°æ®åº”è¯¥ä» buff çš„ä½ç½®å¼€å§‹å†™å…¥åˆ°æ–‡ä»¶çš„ (*off) åç§»å‡ºã€‚æ¯ä¸€æ¬¡è¢«è°ƒç”¨åï¼Œå‡½æ•°éœ€è¦æ ¹æ®å†™å…¥çš„æ•°æ®é•¿åº¦è°ƒæ•´ (*off) çš„å€¼ã€‚ return: æˆåŠŸå†™å…¥çš„æ•°æ®é•¿åº¦ */ static ssize_t procfile_write(struct file *file, const char __user *buff, size_t len, loff_t *off) /* procfile_read å‡½æ•°è´Ÿè´£ä»æ–‡ä»¶çš„ï¼ˆ*offï¼‰ä½ç½®æ‹·è´æ•°æ®åˆ°ç”¨æˆ·ç©ºé—´çš„ buff ä¸­å»ã€‚ file: [IN] æ–‡ä»¶æŒ‡é’ˆ buff: [OUT] éœ€è¦è¯»å‡ºçš„æ•°æ®çš„å­˜æ”¾ä½ç½®ã€‚æ³¨æ„è¿™ä¸ªbuffæ˜¯åœ¨user spaceçš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ copy_to_user æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ã€‚åŒæ—¶éœ€è¦æ³¨æ„ copy_to_user å‡½æ•°è¿”å›çš„æ˜¯è¿˜æ²¡æœ‰ è¢«æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´å»çš„æ•°æ®é•¿åº¦ï¼Œè€Œä¸æ˜¯åƒä¸€èˆ¬çš„è¿”å›æ‹·è´æˆåŠŸçš„é•¿åº¦ã€‚ len: [IN] éœ€è¦è¯»å–çš„æ•°æ®é•¿åº¦ off: [IN/OUT] è¡¨ç¤ºæ–‡ä»¶çš„åç§»åœ°å€offsetã€‚æ•°æ®åº”è¯¥ä»æ–‡ä»¶çš„(*off) åç§»å¤„è¯»å–åˆ° buff ä¸­ã€‚æ¯ä¸€æ¬¡è¢«è°ƒç”¨åï¼Œå‡½æ•°éœ€è¦æ ¹æ®å·²ç»è¯»å–çš„æ•°æ®é•¿åº¦è°ƒæ•´ (*off) çš„å€¼ã€‚ return: æˆåŠŸè¯»å–çš„æ•°æ®é•¿åº¦ */ static ssize_t procfile_read(struct file *file, const char __user *buff, size_t len, loff_t *off) è¿™ä¸¤ä¸ªå‡½æ•°çš„å…·ä½“è¯´æ˜å¯ä»¥å‚è€ƒ Linux Device Drivers, Third Edition çš„ç¬¬ä¸‰ç« è®²è§£çš„ read å’Œ write å‡½æ•°éƒ¨åˆ†ï¼Œå¤§åŒå°å¼‚ã€‚ ","date":"2022-08-01","objectID":"/linux_proc/:3:1","tags":["kernel"],"title":"å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´é€šä¿¡ - proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ","uri":"/linux_proc/"},{"categories":null,"content":"æ·±å…¥ procfile_read äº†è§£äº†æ¥å£å‡½æ•°çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å›åˆ°å…ˆå‰çš„ä¾‹å­å†ä»”ç»†åˆ†æä¸€ä¸‹è¾“å‡ºã€‚å¯ä»¥çœ‹åˆ°åœ¨ cat\r/proc/pbuf çš„æ—¶å€™æ‰“å°äº†ä¸¤æ¬¡çš„ â€œcopy_to_user failedâ€ã€‚ä¸ºä»€ä¹ˆä¼šæ‰“å°ä¸¤æ¬¡å‘¢ï¼Ÿ å› ä¸º cat é»˜è®¤æ˜¯ä½¿ç”¨ sendfile å‡½æ•°æ¥ç›´æ¥åœ¨ kernel space ä¸­ä» /proc/pbuf æ–‡ä»¶ä¼ é€’æ•°æ®åˆ° stdout çš„ã€‚åªæœ‰å½“ sendfile è¿”å›å€¼ä¸º 0ï¼ˆeofï¼‰çš„æ—¶å€™ cat æ‰ä¼šé€€å‡ºã€‚ å¯¹äº /proc/pbuf æ–‡ä»¶çš„è¯»å›è°ƒå‡½æ•°æ¥è¯´ï¼Œå…¶è°ƒç”¨æ ˆå¦‚ä¸‹ 1 procfile_read procfs1.c 30 0xc87e602a 2 proc_reg_read inode.c 197 0xc10c82d8 3 do_loop_readv_writev read_write.c 636 0xc108d7a9 4 do_readv_writev read_write.c 768 0xc108d9ac 5 vfs_readv read_write.c 790 0xc108d9eb 6 kernel_readv splice.c 567 0xc10ab12d 7 default_file_splice_read splice.c 643 0xc10ac9e6 8 do_splice_to splice.c 1146 0xc10ab496 9 splice_direct_to_actor splice.c 1217 0xc10ab561 10 do_splice_direct splice.c 1307 0xc10acce2 11 do_sendfile read_write.c 968 0xc108ddff 12 sys_sendfile64 read_write.c 1023 0xc108dfde 13 ia32_sysenter_target entry_32.S 439 0xc12733be 14 ?? 0xffffe424 15 ?? 0x804fd47 16 ?? 0x80e9616 ç”±äºå‡½æ•° splice_direct_to_actor ä¸­ä¼šå¾ªç¯è°ƒç”¨ do_splice_to å‡½æ•°æ¥ä¼ é€’æ•°æ®ï¼Œç›´åˆ°è¿”å›å€¼ä¸º 0 ï¼ˆä¹Ÿå°±æ˜¯ /proc/pbuf çš„è¯»å›è°ƒå‡½æ•°è¿”å› 0ï¼‰ã€‚æ‰€ä»¥å…¶å® do_sendfile è¢«è°ƒç”¨äº† 2 æ¬¡ï¼Œè€Œ procfile_read åˆ™è¢«è°ƒç”¨äº† 3 æ¬¡ã€‚è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š - do_sendfile (return 13) - procfile_read (return 13) - procfile_read (return 0) - do_sendfile (return 0) - procfile_read (return 0) ","date":"2022-08-01","objectID":"/linux_proc/:3:2","tags":["kernel"],"title":"å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´é€šä¿¡ - proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ","uri":"/linux_proc/"},{"categories":null,"content":"æ¥å£å‡½æ•°çš„æ¼”å˜ ä¸ºä»€ä¹ˆåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä»£ç é‡Œé‚£ä¹ˆå¤šçš„å®ï¼Ÿè¿™æ˜¯å› ä¸ºéšç€ linux kernel çš„ä¸æ–­æ›´æ–°ï¼Œproc è™šæ‹Ÿæ–‡ä»¶çš„ä½¿ç”¨æ–¹å¼ä¹Ÿå‘ç”Ÿäº†å¤šæ¬¡å˜åŒ–ã€‚æœ€é‡è¦çš„å˜åŒ–å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼ˆå‚è§å¤´æ–‡ä»¶ include/linux/proc_fs.h ï¼‰ VERSION CHANGE v3.10 remove read_proc and write_proc from struct proc_dir_entry v5.6 use â€˜struct proc_opsâ€™ to instead of â€˜struct file_operationâ€™ ç¿»çœ‹ 3.10 ä»¥å‰çš„ linux kernelï¼Œå¯ä»¥çœ‹åˆ° proc æ–‡ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒæ•°æ®ç»“æ„ proc_dir_entry å¦‚ä¸‹æ‰€ç¤ºï¼š struct proc_dir_entry { // ... const struct inode_operations *proc_iops; // Inode operations functions const struct file_operations *proc_fops; // File operations functions // ... read_proc_t *read_proc; // proc read function write_proc_t *write_proc; // proc write function // ... }; struct file_operations { // ... ssize_t (*read) (struct file *, char __user *, size_t, loff_t *); ssize_t (*write) (struct file *, const char __user *, size_t, loff_t *); // ... }; ä¹Ÿå°±æ˜¯è¯´è¯»å†™æ–‡ä»¶å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼è¿›è¡Œ A. é€šè¿‡è°ƒç”¨ proc æä¾›çš„å‡½æ•°æŒ‡é’ˆæ¥å£ read_proc å’Œ write_proc B. é€šè¿‡æ ‡å‡†çš„æ–‡ä»¶ç³»ç»Ÿæ¥å£ proc_fops-\u003eread å’Œ proc_fops-\u003ewrite å†çœ‹ä¸‹ 5.6 çš„æ•°æ®ç»“æ„ï¼ˆ fs/proc/internal.h ï¼‰ struct proc_dir_entry { // ... const struct inode_operations *proc_iops; union { const struct proc_ops *proc_ops; const struct file_operations *proc_dir_ops; }; // ... }; struct proc_ops { // ... ssize_t (*proc_read)(struct file *, char __user *, size_t, loff_t *); ssize_t (*proc_write)(struct file *, const char __user *, size_t, loff_t *); // ... } __randomize_layout; å¯ä»¥å‘ç°ï¼Œ read_proc å’Œ write_proc æ¥å£è¢«ç§»é™¤äº†ï¼›åŒæ—¶å¤šäº†ä¸€ä¸ª struct proc_ops ç»“æ„æŒ‡é’ˆã€‚ä¹‹æ‰€ä»¥æŠŠåŸæ¥çš„ struct file_operations æ›¿æ¢ä¸º struct\rproc_ops ï¼ŒåŸå› æ˜¯ struct file_operations åŒ…å«äº†å¾ˆå¤š VFS ä¸éœ€è¦çš„æˆå‘˜ï¼›æ›¿æ¢æˆ struct proc_ops ä½œä¸º proc VFS ä¸“ç”¨çš„ç»“æ„ä½“ï¼Œå¯ä»¥é¿å…åœ¨ struct\rfile_operations å¢åŠ æ–°åŠŸèƒ½çš„æ—¶å€™å½±å“ proc VFSï¼Œä¹Ÿå¯ä»¥é€šè¿‡åœ¨ struct proc_ops ä¸­æ·»åŠ ç‰¹å®šçš„ä¸€äº›æˆå‘˜æ¥æ‰©å±• proc VFS çš„åŠŸèƒ½ã€‚ ç”±äº proc_ops-\u003eproc_read å’Œ proc_ops-\u003eproc_write å‡½æ•°åŸå‹å’Œ file_operations-\u003eread ï¼Œ file_operations-\u003ewrite å®Œå…¨ä¸€æ ·ã€‚æ‰€ä»¥æœ€ä½³ä½¿ç”¨æ–¹å¼åº”è¯¥æ˜¯é€šè¿‡æ–‡ä»¶ç³»ç»Ÿæ¥è¯»å– proc çš„è™šæ‹Ÿæ–‡ä»¶ã€‚è¿™æ ·ä¸ç®¡æ˜¯ 5.6 ä¹‹å‰çš„ file_operations æˆ–è€…ä¹‹åçš„ proc_ops éƒ½å¯ä»¥ä½¿ç”¨ä¸€æ ·çš„ read write å‡½æ•°äº†ã€‚ ","date":"2022-08-01","objectID":"/linux_proc/:3:3","tags":["kernel"],"title":"å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´é€šä¿¡ - proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ","uri":"/linux_proc/"},{"categories":null,"content":"é«˜çº§åº”ç”¨ ","date":"2022-08-01","objectID":"/linux_proc/:4:0","tags":["kernel"],"title":"å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´é€šä¿¡ - proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ","uri":"/linux_proc/"},{"categories":null,"content":"æ•°æ®é‡å¤§äº PAGE_SIZE å¦‚æœä»”ç»†é˜…è¯»ä¸Šé¢çš„ä»£ç å°±ä¼šæ³¨æ„åˆ°ï¼Œè¿™ä¸ªä¾‹å­ä¸­çš„ readfile_proc åªèƒ½æ”¯æŒæ•°æ®é‡å°äºç­‰äºä¸€ä¸ª PAGE_SIZE çš„æƒ…å½¢ã€‚å¦‚æœéœ€è¦è¯»å–å¤§äºä¸€ä¸ª PAGE_SIZE çš„æ•°æ®ï¼Œé‚£ä¹ˆå‡½æ•°åº”è¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿç¤ºä¾‹å¦‚ä¸‹ï¼š #define PROCFS_MAX_SIZE (1024*8) /* The buffer used to store character for this module */ static char procfs_buffer[PROCFS_MAX_SIZE]; /* The size of the buffer */ static unsigned long procfs_buffer_size = 0; static ssize_t procfile_read(struct file *file, const char __user *buff, size_t len, loff_t *off) { size_t count = len, data_length = sizeof(procfs_buffer); ssize_t retval = 0; unsigned long ret = 0; if (*off \u003e= data_length) goto out; if (*off + len \u003e data_length) count = data_length - *off; /* ret contains the amount of chars wasn't successfully written to `buf` */ ret = copy_to_user(buff, procfs_buffer + *off, count); *off += count - ret; retval = count - ret; out: return retval; } /* cat /dev/zero | tr \"\\0\" \"a\" | dd of=/tmp/1.txt bs=1023 count=1 cat /tmp/1.txt \u003e /proc/pbuf */ static ssize_t procfile_write(struct file *file, const char __user *buff, size_t len, loff_t *off) { unsigned long write_size = len; unsigned long left_size = PROCFS_MAX_SIZE - procfs_buffer_size; if (write_size \u003e left_size) write_size = left_size; if (copy_from_user(procfs_buffer + procfs_buffer_size, buff, write_size)) { pr_info(\"copy_from_user failed\\n\"); return -EFAULT; } pr_info(\"procfile write offset %lu with length %lu\\n\", procfs_buffer_size, write_size); procfs_buffer_size += write_size; *off += write_size; return write_size; } ","date":"2022-08-01","objectID":"/linux_proc/:4:1","tags":["kernel"],"title":"å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´é€šä¿¡ - proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ","uri":"/linux_proc/"},{"categories":null,"content":"proc ä¸“ç”¨æ¥å£ å¦‚æœæ˜¯ä½¿ç”¨çš„æ˜¯ 3.10 ä»¥åçš„å†…æ ¸ç‰ˆæœ¬ï¼Œé‚£ä¹ˆè¯·å‡ºé—¨å³è½¬ï¼Œå› ä¸ºä¸‹é¢çš„å†…å®¹å¯¹ä½ å¸®åŠ©ä¸å¤§ã€‚æ–°çš„å†…æ ¸å·²ç»ä¸æ”¯æŒè¿™ç§ä½¿ç”¨æ–¹å¼ã€‚ä½†æ˜¯å¦‚æœä½ ä½¿ç”¨çš„è¿˜æ˜¯æ—§ç‰ˆçš„ kernelï¼Œé‚£ä¹ˆè¯·ä»”ç»†çš„å¾€ä¸‹çœ‹ã€‚å› ä¸ºåœ¨ç½‘ç»œä¸Šæœä¸€ä¸‹å°±ä¼šå‘ç°ï¼Œå¾ˆå°‘æœ‰æ–‡æ¡£ä¼šå»è¯¦ç»†è§£é‡Šè¿™ä¸ªæ¥å£æ€ä¹ˆä½¿ç”¨ã€‚æˆ–è€…è§£é‡Šäº†ä¹Ÿæ˜¯äº‘é‡Œé›¾é‡Œï¼Œå¾ˆéš¾çœ‹æ‡‚ã€‚ åœ¨çœ‹æˆ‘å†™çš„æ–‡å­—ä¹‹å‰ï¼Œå»ºè®®å…ˆå­¦ä¹ ä¸€ä¸‹ kernel è‡ªå¸¦çš„æ–‡æ¡£å’Œä¾‹ç¨‹ï¼Œæ¯•ç«Ÿè¿™æ‰æ˜¯æœ€æƒå¨çš„ Linux Kernel Procfs Guide procfs_example.c ç„¶åå¦‚æœè¿˜ä¸æ˜ç™½ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¸‹é¢çš„è¡¥å……è¯´æ˜ã€‚ ","date":"2022-08-01","objectID":"/linux_proc/:5:0","tags":["kernel"],"title":"å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´é€šä¿¡ - proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ","uri":"/linux_proc/"},{"categories":null,"content":"å®ä¾‹è¯´æ˜ è¿˜æ˜¯è€è§„çŸ©ï¼Œå…ˆä¸¾ä¾‹å­ï¼Œå¦‚æœä½ åªæ˜¯æƒ³ç”¨ä¸€ä¸‹ï¼Œä¸æƒ³çŸ¥é“å¤ªå¤šï¼ˆå¾ˆå¿™ï¼‰ï¼Œé‚£ä¹ˆç…§ä¾‹å­å†™å°±å®Œäº†ã€‚ç”±äº proc çš„ä¸“ç”¨æ¥å£æä¾›äº†å‡ ç§å†™æ³•ï¼Œæ‰€ä»¥éœ€è¦åˆ†æƒ…å†µæ¥ä¸¾ä¾‹ã€‚ï¼ˆå°±å¾ˆçƒ¦ï¼‰ ç”±äº write å›è°ƒå‡½æ•°ç›¸å¯¹æ¯”è¾ƒæ¸…æ¥šï¼Œæˆ‘åªå¯¹ read å‡½æ•°è¿›è¡Œåˆ†æã€‚ ä¼ è¾“æ•°æ®é‡å°äºç­‰äºä¸€ä¸ª PAGE_SIZE åœ¨æ—©æœŸçš„ linux kernel ä¸­ï¼Œæœ‰å¤§é‡çš„ä½¿ç”¨ proc ä¸“ç”¨æ¥å£æ¥è¯»å†™ proc è™šæ‹Ÿæ–‡ä»¶çš„ä¾‹å­ã€‚ä¸»è¦æœ‰ä»¥ä¸‹çš„ä¸¤ç§ å†™æ³• A \r static int ap_debug_proc_read(char *page, char **start, off_t off, int count, int *eof, void *data) { char *p = page; struct ap_data *ap = (struct ap_data *) data; if (off != 0) { *eof = 1; return 0; } p += sprintf(p, \"BridgedUnicastFrames=%u\\n\", ap-\u003ebridged_unicast); p += sprintf(p, \"BridgedMulticastFrames=%u\\n\", ap-\u003ebridged_multicast); return (p - page); } å†™æ³• B \r static int ap_debug_proc_read(char *page, char **start, off_t off, int count, int *eof, void *data) { char *p = page; struct ap_data *ap = (struct ap_data *) data; p += sprintf(p, \"BridgedUnicastFrames=%u\\n\", ap-\u003ebridged_unicast); p += sprintf(p, \"BridgedMulticastFrames=%u\\n\", ap-\u003ebridged_multicast); *eof = 1; return (p - page); } å¦‚æœæŸ¥çœ‹è°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°çš„å‡½æ•° __proc_file_read ï¼ˆå®ç°åœ¨æ–‡ä»¶ fs/proc/generic.c ä¸­ï¼‰å°±å¯ä»¥å‘ç°ï¼ŒB çš„å†™æ³•è¦æ›´å¥½ä¸€äº›ï¼ŒA åˆ™ä¼šå¤šå¾ªç¯ä¸€æ¬¡ã€‚ è¿™ç§å†™æ³•å…¶å®ä¹Ÿå°±æ˜¯åœ¨å‡½æ•° __proc_file_read æ³¨é‡Šä¸­æåˆ°çš„ 3 ç§åšæ³•ä¸­çš„ç¬¬ä¸€ç§ã€‚åŸæ–‡æ‘˜å½•å¦‚ä¸‹: Leave *start = NULL. (This is the default.) Put the data of the requested offset at that offset within the buffer. Return the number (n) of bytes there are from the beginning of the buffer up to the last byte of data. If the number of supplied bytes (= n - offset) is greater than zero and you didn't signal eof and the reader is prepared to take more data you will be called again with the requested offset advanced by the number of bytes absorbed. This interface is useful for files no larger than the buffer. è¿˜ä¸ç†è§£æ˜¯ä¸æ˜¯ï¼Ÿæ¢ç§è¯´æ³• 1st call: - *start = NULL # enter proc_read - memcpy(page + offset, internal_data + offset, data_copied_to_page_len) - data_copied_to_user_len = data_copied_to_page_len - return (offset + data_copied_to_user_len) # exit proc_read - copy data of data_copied_to_user_len from kernel space (page + offset) to user space (buf + offset) - offset += data_copied_to_user_len 2nd call: - *start = NULL # enter proc_read - memcpy(page + offset, internal_data + offset, data_copied_to_page_len) - data_copied_to_user_len = data_copied_to_page_len - return (offset + data_copied_to_user_len) # exit proc_read - copy data of data_copied_to_user_len from kernel space (page + offset) to user space (buf + offset) - offset += data_copied_to_user_len åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œstart ä¸è¢«ä½¿ç”¨ã€‚éœ€è¦å…³æ³¨çš„åªæœ‰ offset å’Œ eof ã€‚ ä»å‰é¢çš„å‡½æ•°è°ƒç”¨å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶ä¸€èˆ¬ç”¨ eof æ¥åˆ¤æ–­æ˜¯å¦è¯»å–ç»“æŸï¼Œä½†æ˜¯å³ä½¿æ²¡æœ‰è®¾ç½® eof ä¹Ÿèƒ½ç»“æŸè¯»å–å¾ªç¯ã€‚åªè¦æŠŠæ•°æ®è¯»å–ç»“æŸå³å¯ã€‚åªæ˜¯è¿™æ ·å®¹æ˜“å‡ºé”™ä¸”æ•ˆç‡ä½ï¼Œæ‰€ä»¥æ˜¾å¼çš„æŒ‡å®š eof æ˜¯ä¸ªæ›´å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚ å¦‚æœå¯¹äº offset å’Œ eof çš„ç†è§£è¿˜æ˜¯ä¸å¤Ÿæ¸…æ¥šï¼Œå¯ä»¥å‚è€ƒ stackoverflow ä¸Šçš„ä¸€æ®µä¸¾ä¾‹ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯æŒºæ¸…æ¥šçš„ã€‚ off is the position in the file from where data has to be read from. This is like off set of normal file. But, in the case of proc_read it is some what different. For example if you invoke a read call on the proc file to read 100 bytes of data, off and count in the proc_read will be like this: in the first time, off = 0, count 100. Say for example in your proc_read you have returned only 10 bytes. Then the control cannot come back to the user application, your proc_read will be called by the kernel once again with off as 10 and count as 90. Again if you return 20 in the proc_read, you will again called with off 30, count 70. Like this you will be called till count reaches 0. Then the data is written into the given user buffer and your application read() call returns. But if you don't have hundred bytes of data and want to return only a few bytes, you must set the eof to 1. Then the read() function returns immediately. ä¼ è¾“æ•°æ®é‡å¤§äºä¸€ä¸ª PAGE_SIZE è¿˜æ˜¯å…ˆçœ‹ä¾‹å­ #define BUFSIZ 8192 static char output_data[BUFSIZ] = {0}; static int read_method2(char *page, char **start, off_t offset, int count, int *eof, void *data) { int len = strlen(output_data); int read_size = PAGE_SIZE-1; // suppose PAGE_SIZE is 4K if (offset \u003e= len) { *eof = 1; return 0; } memcpy(page, output_data+offset, read_size); *start = read_size; return (read_size); } æ‰€ä»¥å¦‚æœ caller è¯·æ±‚è¯»å–çš„æ˜¯ 8K å­—èŠ‚ï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡è°ƒç”¨ read_proc çš„æ—¶å€™ offset 0ï¼Œ count 8192ï¼›ç¬¬äºŒæ¬¡ offset = offset + (*start) ï¼Œå³ 4095 (4K-1)ï¼Œcount 4097ï¼›ç¬¬ä¸‰æ¬¡ offset 81","date":"2022-08-01","objectID":"/linux_proc/:5:1","tags":["kernel"],"title":"å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´é€šä¿¡ - proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ","uri":"/linux_proc/"},{"categories":null,"content":"å‚è€ƒ The Linux Kernel Module Programming Guide Access the Linux kernel using the /proc filesystem Linux Kernel Procfs Guide What is the difference between procfs and sysfs? ","date":"2022-08-01","objectID":"/linux_proc/:6:0","tags":["kernel"],"title":"å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´é€šä¿¡ - proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ","uri":"/linux_proc/"},{"categories":null,"content":"è°ˆåˆ°ä¿¡æ¯å®‰å…¨ï¼Œæˆ‘åªèƒ½ç®—æ˜¯ä¸ªé—¨å¤–æ±‰ã€‚ä½†æ˜¯ç”±äºå·¥ä½œéœ€æ±‚ï¼Œç»å¸¸ä¹Ÿä¼šæ¥è§¦ä¸€äº›ï¼Œæ‰€ä»¥æ•´ç†ä¸€ä¸‹å¤‡æŸ¥ã€‚é¡ºä¾¿ä¹ŸæŠŠè‡ªå·±çš„ä¸€äº›å¿ƒå¾—åˆ†äº«å‡ºæ¥ã€‚ ","date":"2022-07-01","objectID":"/security/:0:0","tags":null,"title":"ä¿¡æ¯å®‰å…¨æŠ€æœ¯å…¥é—¨","uri":"/security/"},{"categories":null,"content":"å…³é”®å­— æˆ‘ä»¬åœ¨çœ‹è·Ÿå®‰å…¨ç›¸å…³çš„æ–‡çŒ®çš„æ—¶å€™ï¼Œæœ€å¸¸çœ‹åˆ°çš„å°±æ˜¯ä»¥ä¸‹çš„ä¸€äº›è¯æ±‡ã€‚ç†è§£å®ƒä»¬å¯¹äºç†è§£ç›¸å…³æŠ€æœ¯æ˜¯å¾ˆé‡è¦çš„ã€‚ Confidentiality ä¿å¯†æ€§ Encrypt åŠ å¯† Integrity å®Œæ•´æ€§ï¼ˆä½ æœ‰æ²¡æœ‰è¢«ç¯¡æ”¹è¿‡ï¼Ÿï¼‰ Authentication è®¤è¯ï¼ˆä½ æ˜¯è°ï¼Ÿï¼‰ ","date":"2022-07-01","objectID":"/security/:1:0","tags":null,"title":"ä¿¡æ¯å®‰å…¨æŠ€æœ¯å…¥é—¨","uri":"/security/"},{"categories":null,"content":"ç›¸å…³æŠ€æœ¯ æ‰€æœ‰çš„æŠ€æœ¯éƒ½æ˜¯ä¸ºäº†æ»¡è¶³åº”ç”¨çš„éœ€æ±‚è€Œäº§ç”Ÿã€‚å®‰å…¨æŠ€æœ¯ä¹Ÿä¸ä¾‹å¤–ã€‚ ","date":"2022-07-01","objectID":"/security/:2:0","tags":null,"title":"ä¿¡æ¯å®‰å…¨æŠ€æœ¯å…¥é—¨","uri":"/security/"},{"categories":null,"content":"å¯¹ç§°åŠ å¯†ç®—æ³• è€ƒè™‘ä¸€ä¸ªåœºæ™¯ã€‚A æ˜¯ä¸€ä¸ªåœ°ä¸‹å·¥ä½œè€…ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼Œä»–éƒ½è¦å’Œè‡ªå·±çš„ä¸Šçº¿ B è”ç³»ä¼ é€’ä¿¡æ¯ã€‚ä¸ºäº†ä¿è¯ä¿¡æ¯ä¸è¢«çªƒå¬ï¼ŒA éœ€è¦æŠŠè‡ªå·±çš„ä¿¡æ¯åŠ å¯†ä¹‹åå†å‘é€ç»™ Bï¼Œè€Œ B è¦åšçš„å°±æ˜¯è§£å¯†å¹¶æŸ¥çœ‹ A ç»™ä»–çš„ä¿¡æ¯ã€‚ä¹‹å B åŒæ ·çš„ä¹Ÿå¯ä»¥åŠ å¯†è‡ªå·±çš„ä¿¡æ¯å†ä¼ é€’ç»™ Aã€‚ è¿™é‡Œç”¨åˆ°çš„åŠ è§£å¯†ï¼Œæœ€å¸¸ç”¨çš„æ–¹å¼å°±æ˜¯å¯¹ç§°å¼çš„åŠ å¯†ç®—æ³•äº†ã€‚ä¹Ÿå°±æ˜¯åŒæ–¹éƒ½æ‹¥æœ‰ä¸€ä¸ªç›¸åŒçš„ç§˜é’¥ï¼ˆkeyï¼‰ï¼Œç„¶åä½¿ç”¨ç›¸åŒçš„ç®—æ³•æ¥åŠ å¯†æˆ–è€…è§£å¯†ï¼Œæœ€ç»ˆè·å¾—æ˜æ–‡ã€‚ è¿™æ ·çš„åŠ å¯†ç®—æ³•æœ‰å¾ˆå¤šï¼Œé€šè¿‡ man openssl -\u003e Encoding and Cipher Commands å¯ä»¥çœ‹åˆ°ä¸€äº›å¸¸ç”¨çš„ç®—æ³•åˆ—è¡¨ã€‚ ","date":"2022-07-01","objectID":"/security/:2:1","tags":null,"title":"ä¿¡æ¯å®‰å…¨æŠ€æœ¯å…¥é—¨","uri":"/security/"},{"categories":null,"content":"éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼ˆå…¬é’¥åŠ å¯†ï¼‰ è¿™æ ·çš„æ–¹å¼å¾ˆç®€ä¾¿å¿«æ·ï¼Œä½†æ˜¯å­˜åœ¨ä¸€ä¸ªé—®é¢˜ã€‚é‚£å°±æ˜¯ A çš„ç§˜é’¥æ¯æ¬¡æ›´æ–°çš„æ—¶å€™éƒ½å¿…é¡»é€šçŸ¥ B ä»¥è¿›è¡ŒåŒæ­¥ã€‚è¿™ä¸ªé€šçŸ¥çš„è¿‡ç¨‹å°±å­˜åœ¨ç€çš„æ³„æ¼çš„é£é™©ã€‚ äºæ˜¯ A B åœ¨å•†é‡ä¹‹åæ›´æ–°äº†ä»–ä»¬çš„åŠ å¯†ç­–ç•¥ï¼Œé‡‡ç”¨äº†å…¬é’¥åŠ å¯†ç®—æ³•ã€‚ å…¬é’¥åŠ å¯†ç®—æ³•å’Œå¯¹ç§°åŠ å¯†ç®—æ³•ä¸åŒï¼ŒåŒ…å«äº† 2 ä¸ª keyã€‚ä¸€ä¸ªç§é’¥ï¼ˆprivate keyï¼‰å’Œä¸€ä¸ªå…¬é’¥ï¼ˆpublic keyï¼‰ã€‚å…¬é’¥å¯ä»¥å…¬å¼€å‘å¸ƒï¼Œç”¨æ¥åŠ å¯†ä¿¡æ¯ï¼›è€Œç§é’¥åªä¼šå¦¥å–„ä¿å­˜å¥½ï¼Œç”¨æ¥è§£å¯†å…¬é’¥åŠ å¯†çš„ä¿¡æ¯ã€‚å› ä¸ºç§é’¥ä¸ä¼šè¢«ä¼ æ’­ï¼Œæ‰€ä»¥å°±è§£å†³äº†å¯¹ç§°æ€§åŠ å¯†å¸¦æ¥çš„ç§˜é’¥æ³„æ¼çš„é£é™©ã€‚æ³¨æ„ï¼Œè™½ç„¶ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ˜¯ç”¨å…¬é’¥åŠ å¯†ç§é’¥è§£å¯†ï¼Œä½†æ˜¯é€†è¿‡æ¥ä¹Ÿæ˜¯å¯è¡Œçš„ã€‚ç§é’¥åŠ å¯†çš„ä¿¡æ¯ï¼Œä½¿ç”¨å…¬é’¥åŒæ ·å¯ä»¥è§£å¯†ã€‚ æ¯”è¾ƒå…¸å‹çš„éå¯¹ç§°åŠ å¯†ç®—æ³•å°±æ˜¯ RSA äº†ã€‚ ","date":"2022-07-01","objectID":"/security/:2:2","tags":null,"title":"ä¿¡æ¯å®‰å…¨æŠ€æœ¯å…¥é—¨","uri":"/security/"},{"categories":null,"content":"PKI ä½†æ˜¯æ€ä¹ˆç¡®å®š B æ‹¿åˆ°çš„å…¬é’¥æ˜¯å±äº A çš„å‘¢ï¼Ÿå¦‚æœä¸­é—´æœ‰äººå·å·æŠŠ A å‘ç»™ B çš„å…¬é’¥æ¢æ‰äº†ï¼Œé‚£ä¸å°±å¯ä»¥ä¼ªè£…æˆ A äº†å—ï¼Ÿ PKI éš†é‡ç™»åœºã€‚PKI ä¸­æ–‡è¯‘ä¸ºå…¬é’¥åŸºç¡€è®¾æ–½ï¼Œå®ƒæ˜¯è‹±æ–‡ Public Key Infrastructure çš„ç¼©å†™ï¼ŒåŸºäºå…¬é’¥å¯†ç å­¦ï¼Œå»ºç«‹èµ·ä¸€ç§æ™®éé€‚ç”¨çš„åŸºç¡€è®¾æ–½ï¼Œä¸ºå„ç§ç½‘ç»œåº”ç”¨æä¾›å…¨é¢çš„å®‰å…¨æœåŠ¡ã€‚ æˆ‘ä»¬å¯ä»¥ç®€å•çš„è®¤ä¸º PKI ä½“ç³»å°±æ˜¯ä¸ºäº†æ²Ÿé€šçš„åŒæ–¹å®‰å…¨çš„æ‹¿åˆ°å¯¹æ–¹çš„ç§˜é’¥ï¼ˆçœŸå®ï¼Œå®Œæ•´ï¼‰ã€‚ PKI åŸºæœ¬ç»“æ„ç”±è¯ä¹¦è®¤è¯æœºæ„ï¼ˆcertificate authority, CAï¼‰ã€è¯ä¹¦æŒæœ‰è€…ï¼ˆcertificate holderï¼‰ã€ä¾èµ–æ–¹ï¼ˆrelying partyï¼‰ä¸‰æ–¹æ„æˆ CA æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¯ä¿¡ç¬¬ä¸‰æ–¹ï¼Œä¸ºè¯ä¹¦æŒæœ‰è€…ç­¾å‘æ•°å­—è¯ä¹¦ï¼Œæ•°å­—è¯ä¹¦ä¸­å£°æ˜äº†è¯ä¹¦æŒæœ‰è€…çš„èº«ä»½å’Œå…¬é’¥ã€‚CA åœ¨ç­¾å‘è¯ä¹¦å‰åº”å¯¹è¯ä¹¦æŒæœ‰è€…çš„èº«ä»½ä¿¡æ¯è¿›è¡Œæ ¸å®éªŒè¯ï¼Œå¹¶æ ¹æ®å…¶æ ¸éªŒç»“æœä¸ºå…¶ç­¾å‘è¯ä¹¦ã€‚ è¯ä¹¦æŒæœ‰è€…å‘ CA ç”³è¯·æ•°å­—è¯ä¹¦ï¼Œå¹¶å‘ CA æä¾›å¿…è¦çš„ä¿¡æ¯ä»¥è¯æ˜å…¶èº«ä»½åŠèƒ½åŠ›ï¼Œè·å¾—ç”± CA ç­¾å‘çš„è¯ä¹¦ï¼›è¯ä¹¦æŒæœ‰è€…åœ¨ä¸ä¾èµ–æ–¹è¿›è¡Œäº¤äº’æ—¶ï¼Œéœ€å‘ä¾èµ–æ–¹æä¾›ç”± CA ç­¾å‘çš„æ•°å­—è¯ä¹¦è¯æ˜å…¶æœ‰æ•ˆèº«ä»½ã€‚ ä¾èµ–æ–¹æ˜¯è¯ä¹¦çš„éªŒè¯æ–¹ï¼Œä¾èµ–æ–¹ä¸è¯ä¹¦æŒæœ‰è€…è¿›è¡Œäº¤äº’ï¼ˆå¦‚å»ºç«‹é€šä¿¡è¿æ¥ï¼‰æ—¶ï¼Œéœ€è·å–è¯ä¹¦æŒæœ‰è€…çš„æ•°å­—è¯ä¹¦ï¼ŒéªŒè¯æ•°å­—è¯ä¹¦çš„çœŸå®æ€§å’Œæœ‰æ•ˆæ€§ã€‚ä¾èµ–æ–¹å¯ä»¥æŒ‡å®šå…¶ä¿¡ä»»çš„ CA åˆ—è¡¨ï¼Œè‹¥è¯ä¹¦æŒæœ‰è€…æä¾›çš„æ•°å­—è¯ä¹¦ä¸æ˜¯å—ä¿¡ CA ç­¾å‘çš„æ•°å­—è¯ä¹¦ï¼Œä¾èµ–æ–¹å°†ä¸è®¤å¯è¯¥è¯ä¹¦æ‰€å£°æ˜çš„ä¿¡æ¯ã€‚ æ‰€ä»¥ä¸‰è€…çš„å…³ç³»ï¼Œç®€å•æ¥è¯´å°±å¦‚ä¸‹å›¾ï¼š +--------------+ +-----\u003e | CA | \u003c----+ | +----+ +--------------+ | request | | identify | certficiate | | issue certificate | trust | | | | v | | provide | +-------------+ certificate +-------------+ | certificate | +---------\u003e | relay party | | holder | \u003c---------+ | | +-------------+ verifiy +-------------+ certificate è¯ä¹¦å­˜åœ¨çš„æ„ä¹‰åœ¨äºå›ç­”â€œå…¬é’¥å±äºè°â€çš„é—®é¢˜ï¼Œä»¥å¸®åŠ©ç”¨æˆ·å®‰å…¨åœ°è·å¾—å¯¹æ–¹çš„å…¬å¼€å¯†é’¥ã€‚ åœ¨ç†è§£äº† PKI ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹ A B å¯ä»¥å¦‚ä½•äº¤äº’ ç§é’¥(key - private key) è¯ä¹¦è¯·æ±‚(csr - certificate signing request) ç­¾åè¯ä¹¦(crt - certificate signed request) \r A CA B + + + | | | generate a pair | | | of keys | | | | send csr | | | +-------------------\u003e | | | | | | 1. verify identity | | | 2. sign the csr | | | 3. send back the cer | | | \u003c-------------------+ | | | | | | | | | send A's crt to B | | | +----------------------------\u003e | 1. verify with CA's cert | | | 2. store A's public key | | | | | | | send data to A| | decrypt with A's | \u003c----------------------------+ | encrypt data with private key | | | A's public key | | | | | | | | | | | | + + + å›¾ç¤ºåªæ ‡æ³¨äº† B å¾€ A å‘é€æ•°æ®çš„è¿‡ç¨‹ï¼Œå¦‚æœæ˜¯ A å¾€ B ä¼ é€’ä¿¡æ¯ï¼Œé‚£ä¹ˆåŒæ ·çš„æ–¹æ³•ï¼Œåªæ˜¯æ¢æˆä½¿ç”¨ B çš„ key è€Œå·²ã€‚ åœ¨è¿™é‡Œé¢è¿˜æœ‰å‡ ç‚¹éœ€è¦è¯´æ˜çš„ æ‰€è°“çš„ç­¾åï¼Œå…¶å®å¯ä»¥ç®€å•çš„ç†è§£æˆæŠŠåŸå§‹è¯ä¹¦å…ˆåš hashï¼Œå†ä½¿ç”¨ CA çš„ private key å¯¹è¿™ä¸ª hash å€¼è¿›è¡ŒåŠ å¯†ï¼Œæœ€åæ·»åŠ åˆ°è¯ä¹¦é‡Œé¢çš„ä¸€ä¸ªè¿‡ç¨‹ è¯ä¹¦å¯ä»¥ç”± CA ç­¾åï¼Œä¹Ÿå¯ä»¥è‡ªç­¾å è¯ä¹¦ä¸€èˆ¬ä½¿ç”¨ X509 çš„æ ¼å¼ï¼Œå…¶ä¸­ä¸­åŒ…å«äº†æŒæœ‰è€…çš„å…¬é’¥å’Œå‘å¸ƒè€…çš„ç­¾åï¼Œä»¥åŠå…¶ä»–çš„ä¸€äº›è¡¨æ˜è¯ä¹¦èº«ä»½ç›¸å…³çš„ä¿¡æ¯ CA CA åˆ†ä¸º Signed CA å’Œ Self Signed CAã€‚ä¸¤è€…çš„å·®åˆ«åœ¨äºå…¶è¯ä¹¦ï¼ˆcertificateï¼‰è¢«è®¤è¯çš„æ–¹å¼ä¸åŒã€‚ Self Signed CA æ˜¯æŒ‡ç”±è‡ªå·±ç»™è‡ªå·±çš„ certificate åšç­¾åè®¤è¯çš„ CA ï¼Œç”±äºä¸€èˆ¬æ¥è®²æ­¤ç±» CA æ€»æ˜¯å¤„äº CA é“¾çš„æœ€é¡¶ç«¯ï¼Œæ‰€ä»¥åˆå« Root CAã€‚ Signed CA æ˜¯æŒ‡ certificate ç”±å…¶ä»– CA è¿›è¡Œç­¾åè®¤è¯çš„ CAã€‚è€Œè®¤è¯å®ƒçš„ CAï¼Œæˆ‘ä»¬ç§°ä¸º Signed CA çš„ä¸Šå±‚ CAï¼Œä¹Ÿå« Parent CAï¼›è€Œ Signed CA åˆ™ç§°ä¸º Sub CA æˆ– Child CAã€‚ ","date":"2022-07-01","objectID":"/security/:2:3","tags":null,"title":"ä¿¡æ¯å®‰å…¨æŠ€æœ¯å…¥é—¨","uri":"/security/"},{"categories":null,"content":"å®ä¾‹è¯´æ˜ ","date":"2022-07-01","objectID":"/security/:3:0","tags":null,"title":"ä¿¡æ¯å®‰å…¨æŠ€æœ¯å…¥é—¨","uri":"/security/"},{"categories":null,"content":"PKI ä¸‹é¢ï¼Œå°±ç”¨ openssl ä¸¾ä¾‹ç”Ÿæˆ RSA çš„ CA å’Œç”¨æˆ·è¯ä¹¦ã€‚ ç”Ÿæˆ CA çš„ç§é’¥ [fog@fog-ibm ca] openssl genrsa -des3 -out ca.key 1024 Generating RSA private key, 1024 bit long modulus ...........................+++++ ............................................+++++ e is 65537 (0x10001) Enter PEM pass phrase: Verifying password - Enter PEM pass phrase: Please backup this ca.key file and remember the pass-phrase you had to enter at a secure location. ç”Ÿæˆ CA çš„è‡ªæˆ‘ç­¾åè¯ä¹¦ fog@tmp$ openssl req -new -x509 -days 365 -key ca.key -out ca.crt Enter pass phrase for ca.key: You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]: State or Province Name (full name) [Some-State]: Locality Name (eg, city) []: Organization Name (eg, company) [Internet Widgits Pty Ltd]: Organizational Unit Name (eg, section) []: Common Name (e.g. server FQDN or YOUR name) []:Fog Email Address []: æŸ¥çœ‹ä¸€ä¸‹ç”Ÿæˆçš„è¯ä¹¦ fog@tmp$ openssl x509 -noout -text -in ca.crt Certificate: Data: Version: 3 (0x2) Serial Number: 6c:5b:7a:5c:37:e3:1b:2d:99:2d:99:20:79:54:c4:d6:52:9e:20:17 Signature Algorithm: sha256WithRSAEncryption Issuer: C = AU, ST = Some-State, O = Internet Widgits Pty Ltd, CN = Fog Validity Not Before: Jul 5 08:43:44 2022 GMT Not After : Jul 5 08:43:44 2023 GMT Subject: C = AU, ST = Some-State, O = Internet Widgits Pty Ltd, CN = Fog Subject Public Key Info: Public Key Algorithm: rsaEncryption RSA Public-Key: (1024 bit) Modulus: 00:c2:ad:39:a9:64:a5:85:5b:39:ab:eb:a8:da:82: 66:90:60:f9:35:d9:ea:67:4e:6f:d6:99:14:1c:32: 6a:23:e4:03:eb:11:44:1a:94:4d:42:a1:74:9e:26: 62:10:0b:4b:a8:3c:10:28:32:c9:d9:1b:34:aa:03: 5d:d6:63:70:32:68:c0:d2:9d:17:e7:b4:47:6e:6e: 86:66:a5:bc:f1:52:4e:2a:47:2a:0e:7b:00:d7:f9: d0:70:c2:12:58ğŸ†df:b3:82:51:23:cf:a8:59:40: c6:a7:7e:f6:8c:91:1e:00:42:87:d1:42:1c:98:15: 4e:ff:1c:38:55:8a:d1:9d:fb Exponent: 65537 (0x10001) X509v3 extensions: X509v3 Subject Key Identifier: 3F:46:C9:DA:5C:4E:60:65:CB:48:8E:DF:FE:92:67:2C:03:A4:B0:A1 X509v3 Authority Key Identifier: keyid:3F:46:C9:DA:5C:4E:60:65:CB:48:8E:DF:FE:92:67:2C:03:A4:B0:A1 X509v3 Basic Constraints: critical CA:TRUE Signature Algorithm: sha256WithRSAEncryption 72:98:2c:4b:ac:5d:3e:aa:21:ca:5f:46:1a:b9:14:2c:2f:b8: e9:3d:8a:bd:19:ea:da:32:13:fc:02:9c:f7:f2:2b:99:56:20: 11:86:5b:7c:1b:ea:5a:0e:f4:bd:da:e2:44:ec:b9:71:7b:3a: 01:a3:d1:dc:bc:fc:52:49:6a:c8:f4:2c:27:45:ab:e6:65:bf: 75:75:1e:66:56:cc:82:71:95:7f:0b:da:8a:bf:2d:b6:7b:fd: 72:a2:68:f5:13:59:6f:ac:72:20:bf:59:0c:20:60:3d:46:6e: d7:4c:83:90:42ğŸ†04:b9:e1:e4:9f:1c:7e:1e:2f:96:32:b0: 89:6e è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ª x509 æ ¼å¼çš„è¯ä¹¦åŒ…å«äº†å“ªäº›å­—æ®µã€‚è¿™ä¸ªå¯¹äºç†è§£è¯ä¹¦å¾ˆé‡è¦ï¼Œæ‰€ä»¥è¯¦ç»†åˆ†æä¸€ä¸‹ Issuer: C = AU, ST = Some-State, O = Internet Widgits Pty Ltd, CN = Fog Subject: C = AU, ST = Some-State, O = Internet Widgits Pty Ltd, CN = Fog å› ä¸ºè¿™æ˜¯ä¸€ä¸ªè‡ªç­¾åçš„è¯ä¹¦ï¼Œæ‰€ä»¥ Issuer å’Œ Subject çš„å†…å®¹æ˜¯ä¸€æ ·ï¼ˆIssuer è¡¨ç¤ºæ˜¯è°é¢å‘çš„è¯ä¹¦ï¼Œè€Œ Subject è¡¨ç¤ºè¿™ä¸ªè¯ä¹¦å±äºè°ï¼‰ã€‚ Subject Public Key Info: Public Key Algorithm: rsaEncryption RSA Public-Key: (1024 bit) Public Key Info å‘Šè¯‰æˆ‘ä»¬è¿™ä¸ª Public Key å¯¹åº”çš„åŠ å¯†ç®—æ³•æ˜¯ RSAï¼Œç§˜é’¥ä¸º 1024 bitï¼Œç„¶åæ˜æ–‡é™„ä¸Šäº†å¯¹åº”çš„ç§˜é’¥ï¼ˆæ³¨æ„è¿™æ˜¯ç§˜é’¥å¯¹é‡Œé¢çš„ public keyï¼‰ã€‚ X509v3 extensions: X509v3 Basic Constraints: critical CA:TRUE è¿™é‡Œå¯ä»¥çœ‹åˆ° CA çš„å€¼æ˜¯ TRUEï¼Œè¡¨ç¤ºè¿™ä¸ªè¯ä¹¦å¯ä»¥ä½œä¸º CA è¯ä¹¦ä½¿ç”¨ã€‚ Signature Algorithm: sha256WithRSAEncryption ç­¾åçš„ç®—æ³•ä¸ºå…ˆç”¨ sha256 åš hash ç®—æ³•ï¼Œç„¶åå†ç”¨ RSA ç®—æ³•ä½¿ç”¨ Issuer çš„ private key è¿›è¡ŒåŠ å¯†ã€‚ ç”Ÿæˆç”¨æˆ·çš„ç§æœ‰å¯†é’¥ fog@tmp$ openssl genrsa -des3 -out my.key 1024 ç”Ÿæˆç”¨æˆ·çš„ç­¾åè¯·æ±‚è¯ä¹¦ fog@tmp$ openssl req -new -key my.key -out my.csr ç”± CA ä¸ºè¯·æ±‚è¯ä¹¦ç­¾å fog@tmp$ openssl x509 -req -CA ca.crt -CAkey ca.key -CAcreateserial -in my.csr -out my.crt -days 365 ç°åœ¨å†æ¥çœ‹çœ‹è¿™ä¸ªç”Ÿæˆçš„è¯ä¹¦æ˜¯ä»€ä¹ˆæ ·çš„ fog@tmp$ openssl x509 -noout -text -in my.crt Certificate: Data: Version: 1 (0x0) Serial Number: 14:a2:7c:94:fa:b8:0c:28:0d:9b:c3:86:44:3a:cf:40:0e:ea:71:c3 Signature Algorithm: sha256WithRSAEncryption Issuer: C = AU, ST = Some-State, O = Internet Widgits Pty Ltd, CN = Fog Valid","date":"2022-07-01","objectID":"/security/:3:1","tags":null,"title":"ä¿¡æ¯å®‰å…¨æŠ€æœ¯å…¥é—¨","uri":"/security/"},{"categories":null,"content":"Reference Difference between self-signed CA and self-signed certificate TLS encryption and mutual authentication using syslog-ng Open Source Edition Making sense of SSL, RSA, X509 and CSR A journey into verifying signatures on x.509 certificates ","date":"2022-07-01","objectID":"/security/:4:0","tags":null,"title":"ä¿¡æ¯å®‰å…¨æŠ€æœ¯å…¥é—¨","uri":"/security/"},{"categories":["programming"],"content":"å‡½æ•°åŸå‹ #include \u003cstring.h\u003e char *strncpy(char *dest, const char *src, size_t n); ","date":"2022-06-30","objectID":"/strncpy/:1:0","tags":["c"],"title":"C è¯­è¨€å¸¸ç”¨åº“å‡½æ•°-strncpy","uri":"/strncpy/"},{"categories":["programming"],"content":"ç”¨æ³•åˆ†æ strncpy ç”±äºæ·»åŠ äº†é•¿åº¦é™åˆ¶ï¼Œé¿å…äº†ç¼“å†²åŒºæº¢å‡ºçš„é—®é¢˜ã€‚ä½†åœ¨ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™å¿…é¡»è¦æ³¨æ„: strncpy åªæœ‰åœ¨æºå­—ç¬¦ä¸²çš„é•¿åº¦å°äºå‚æ•° n æ—¶ï¼Œå®ƒæ‰ä¼šç”¨ NUL(æˆ–è€…'\\0')æ¥ç»“æŸå­—ç¬¦ä¸²ã€‚ å› æ­¤æ­£ç¡®çš„ä½¿ç”¨ strncpy çš„æ–¹æ³•æ˜¯ï¼Œå½“æ‹·è´æºå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†æ—¶ï¼Œä½¿ç”¨ strncpy ä¹‹åï¼Œè‡ªå·±æ‰‹å·¥æ·»åŠ  NUL æ¥ç»“æŸå­—ç¬¦ä¸²ã€‚ #define BUFSIZ 265 int main(int argc, char **argv) { char buf[BUFSIZ]; strncpy(buf, argv[1], sizeof(buf) - 1); buf[sizeof(buf) - 1] = '\\0'; /* é˜²æ­¢bufæ²¡æœ‰åˆå§‹åŒ–ä¸º0ï¼Œç»“æŸå­—ç¬¦ä¸² */ return 0; } è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œè¦æ­£ç¡®ä½¿ç”¨ strncpy è¿˜æ˜¯æŒºéº»çƒ¦çš„ä¸€ä»¶äº‹æƒ…ã€‚ ","date":"2022-06-30","objectID":"/strncpy/:2:0","tags":["c"],"title":"C è¯­è¨€å¸¸ç”¨åº“å‡½æ•°-strncpy","uri":"/strncpy/"},{"categories":["programming"],"content":"æ³¨æ„äº‹é¡¹ ","date":"2022-06-30","objectID":"/strncpy/:3:0","tags":["c"],"title":"C è¯­è¨€å¸¸ç”¨åº“å‡½æ•°-strncpy","uri":"/strncpy/"},{"categories":["programming"],"content":"strlcpy å…¶å®åœ¨ openbsd é‡Œé¢æä¾›äº†ä¸€ä¸ªåº“å‡½æ•° strlcpy ã€‚å®ƒä¿è¯äº†ç›®çš„å­—ä¸²æ€»æ˜¯ä»¥ NUL ç»“å°¾ï¼Œå¹¶ä¸”è¿”å›å€¼æ€»æ˜¯ç›®çš„å­—ä¸²çš„å…¨é•¿(ä¸åŒ…æ‹¬ NUL)ã€‚å…¶æºç å¦‚ä¸‹ /* $OpenBSD: strlcpy.c,v 1.11 2006/05/05 15:27:38 millert Exp $ */ /* * Copyright (c) 1998 Todd C. Miller \u003cTodd.Miller@courtesan.com\u003e * * Permission to use, copy, modify, and distribute this software for any * purpose with or without fee is hereby granted, provided that the above * copyright notice and this permission notice appear in all copies. * * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE. */ #include \u003csys/types.h\u003e#include \u003cstring.h\u003e /* * Copy src to string dst of size siz. At most siz-1 characters * will be copied. Always NUL terminates (unless siz == 0). * Returns strlen(src); if retval \u003e= siz, truncation occurred. */ size_t strlcpy(char *dst, const char *src, size_t siz) { char *d = dst; const char *s = src; size_t n = siz; /* Copy as many bytes as will fit */ if (n != 0) { while (--n != 0) { if ((*d++ = *s++) == '\\0') break; } } /* Not enough room in dst, add NUL and traverse rest of src */ if (n == 0) { if (siz != 0) *d = '\\0'; /* NUL-terminate dst */ while (*s++) ; } return(s - src - 1); /* count does not include NUL */ } ","date":"2022-06-30","objectID":"/strncpy/:3:1","tags":["c"],"title":"C è¯­è¨€å¸¸ç”¨åº“å‡½æ•°-strncpy","uri":"/strncpy/"},{"categories":["programming"],"content":"strncpy vs snprintf é™¤äº†ä½¿ç”¨ strlcpyï¼Œè¿˜æœ‰ä¸ªå¥½çš„é€‰æ‹©æ˜¯ä½¿ç”¨ snprintfã€‚ snprinf å¯ä»¥å®Œæˆ strncpy çš„åŠŸèƒ½ï¼Œè€Œä¸”æ¯” strncpy æ›´æœ‰æ•ˆç‡ã€‚çœ‹ä¸€ä¸‹ glibc ä¸­ strncpy çš„ä»£ç  char * STRNCPY (char *s1, const char *s2, size_t n) { size_t size = __strnlen (s2, n); if (size != n) memset (s1 + size, '\\0', n - size); return memcpy (s1, s2, size); } æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“ s2 çš„é•¿åº¦å°äº n çš„æ—¶å€™ï¼Œstrncpy ä¼šæŠŠ s1 ä¸­ä» s2 çš„é•¿åº¦ä»¥åçš„æ‰€æœ‰å­—èŠ‚éƒ½è®¾ç½®æˆ '\\0' ï¼Œæ˜¾ç„¶ï¼Œè¿™ä¸ªå¯¹äºæˆ‘ä»¬å¤§éƒ¨åˆ†æƒ…å†µä¸‹çš„éœ€æ±‚æ¥è¯´æ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œåªè¦å°†å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—èŠ‚ç½® NULL å³å¯ã€‚è¿™ä¹Ÿæ˜¯ snprinf çš„åšæ³•ã€‚ ","date":"2022-06-30","objectID":"/strncpy/:3:2","tags":["c"],"title":"C è¯­è¨€å¸¸ç”¨åº“å‡½æ•°-strncpy","uri":"/strncpy/"},{"categories":["network"],"content":"æ¦‚è¿° ","date":"2022-02-07","objectID":"/wireless/:1:0","tags":["wifi","wireless","protocol"],"title":"æ— çº¿åè®®å­¦ä¹ ç¬”å½•","uri":"/wireless/"},{"categories":["network"],"content":"ä»ä¸€æ¬¡æ­£å¸¸çš„è¿æ¥è¯´èµ· å…ˆä»ä¸€æ¬¡ç®€å•çš„è¿æ¥çœ‹èµ·ã€‚æµ‹è¯•ç¯å¢ƒå°±æ˜¯ä¸€å°æ— çº¿ STA å’Œä¸€ä¸ª APï¼Œä»¥åŠä¸€å°ç”¨æ¥æŠ“åŒ…çš„ PC ã€‚ +--------+ +-------+ | STA | | AP | +--------+ +-------+ +---------+ | capture | | PC | +---------+ é€šè¿‡ PC ç”¨ wireshark æ¥æŠ“å– STA å’Œ AP ä¹‹é—´çš„æ— çº¿æ•°æ®æŠ¥æ–‡ã€‚ ","date":"2022-02-07","objectID":"/wireless/:2:0","tags":["wifi","wireless","protocol"],"title":"æ— çº¿åè®®å­¦ä¹ ç¬”å½•","uri":"/wireless/"},{"categories":["network"],"content":"ç®¡ç†æŠ¥æ–‡ å…ˆçœ‹çœ‹ç®¡ç†æŠ¥æ–‡ Wireless Management PacketsWireless Management Packets \" Wireless Management Packets ","date":"2022-02-07","objectID":"/wireless/:2:1","tags":["wifi","wireless","protocol"],"title":"æ— çº¿åè®®å­¦ä¹ ç¬”å½•","uri":"/wireless/"},{"categories":["network"],"content":"æ•°æ®æŠ¥æ–‡ ","date":"2022-02-07","objectID":"/wireless/:2:2","tags":["wifi","wireless","protocol"],"title":"æ— çº¿åè®®å­¦ä¹ ç¬”å½•","uri":"/wireless/"},{"categories":["network"],"content":"é™„å½• ","date":"2022-02-07","objectID":"/wireless/:3:0","tags":["wifi","wireless","protocol"],"title":"æ— çº¿åè®®å­¦ä¹ ç¬”å½•","uri":"/wireless/"},{"categories":["network"],"content":"Linux æŠ“æ— çº¿åŒ… ","date":"2022-02-07","objectID":"/wireless/:3:1","tags":["wifi","wireless","protocol"],"title":"æ— çº¿åè®®å­¦ä¹ ç¬”å½•","uri":"/wireless/"},{"categories":["network"],"content":"Wireshark è§£å¯†æ— çº¿åŒ… ","date":"2022-02-07","objectID":"/wireless/:3:2","tags":["wifi","wireless","protocol"],"title":"æ— çº¿åè®®å­¦ä¹ ç¬”å½•","uri":"/wireless/"},{"categories":["programming"],"content":"å‡½æ•°åŸå‹ #include \u003cstdio.h\u003e /* å‡½æ•°è¯´æ˜: æŒ‰ç…§formatæŒ‡å®šçš„æ ¼å¼å¡«å……å­—ç¬¦ä¸²strï¼Œä»¥ '\\0' ç»“å°¾ã€‚ å‡½æ•°è¿”å›å€¼: è‹¥æˆåŠŸåˆ™è¿”å›å­˜å…¥æ•°ç»„çš„å­—ç¬¦æ•°ï¼Œè‹¥ç¼–ç å‡ºé”™åˆ™è¿”å›è´Ÿå€¼ã€‚ */ int sprintf(char *str, const char *format, ...); ","date":"2022-02-07","objectID":"/sprintf/:1:0","tags":["c"],"title":"C è¯­è¨€å¸¸ç”¨åº“å‡½æ•°-sprintf","uri":"/sprintf/"},{"categories":["programming"],"content":"ç”¨æ³•åˆ†æ sprintf ä¸€èˆ¬ç”¨æ¥æŠŠå…¶ä»–ç±»å‹çš„æ•°æ®è½¬æ¢æˆå­—ç¬¦æ•°ç»„å‚¨å­˜ã€‚å®ƒä¼šè‡ªåŠ¨åœ¨æ‰€å†™å…¥å­—ç¬¦ç»„çš„æœ«å°¾åŠ ä¸Š NUL å­—ç¬¦æ¥è¡¨ç¤ºå­—ç¬¦ä¸²çš„ç»“æŸï¼ŒNUL å­—ç¬¦ä¸è¢«è®¡å…¥è¿”å›å€¼ã€‚ sprintf å’Œ strcpy ä¸€æ ·ï¼Œå±äºæ— è¾¹ç•Œæ£€æŸ¥çš„ä¸€ç±»å‡½æ•°ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚ ","date":"2022-02-07","objectID":"/sprintf/:2:0","tags":["c"],"title":"C è¯­è¨€å¸¸ç”¨åº“å‡½æ•°-sprintf","uri":"/sprintf/"},{"categories":["programming"],"content":"æ³¨æ„äº‹é¡¹ å¯¹äºæ–°å†™çš„ä»£ç ï¼Œè¯·æŠ›å¼ƒ sprintfï¼Œç”¨ snprintf ä»£æ›¿ã€‚ ","date":"2022-02-07","objectID":"/sprintf/:3:0","tags":["c"],"title":"C è¯­è¨€å¸¸ç”¨åº“å‡½æ•°-sprintf","uri":"/sprintf/"},{"categories":["programming"],"content":"å‡½æ•°åŸå‹ #include \u003cstring.h\u003e char *strcpy(char *dest, const char *src); ","date":"2022-02-07","objectID":"/strcpy/:1:0","tags":["c"],"title":"C è¯­è¨€å¸¸ç”¨åº“å‡½æ•°-strcpy","uri":"/strcpy/"},{"categories":["programming"],"content":"ç”¨æ³•åˆ†æ strcpy å±äºæ— è¾¹ç•Œæ£€æŸ¥çš„ä¸€ç±»å‡½æ•°ï¼Œå› æ­¤ä½¿ç”¨èµ·æ¥ååˆ†çš„å±é™©ï¼Œåœ¨æ ‡å‡†æ–‡æ¡£ä¸­å·²ç»ä¸å»ºè®®ä½¿ç”¨ã€‚ æ— è¾¹ç•Œæ£€æŸ¥å¾ˆå®¹æ˜“å°±ä¼šå‘ç”Ÿç¼“å†²æº¢å‡ºçš„é”™è¯¯ï¼Œä¾‹å¦‚: #define BUFSIZ 265 int main(int argc, char **argv) { char buf[BUFSIZ]; strcpy(buf, argv[1]); return 0; } æ³¨æ„è¿™ä¸ªä¾‹å­ä¸­ buf å®šä¹‰äº†å¤§å°ä¸º 256ï¼Œä½†æ˜¯ argv[1]å´æ˜¯ä¸é™åˆ¶å¤§å°çš„ã€‚ç”±äº strcpy åªçŸ¥é“æ‹·è´åˆ°æºå­—ä¸²ç»“æŸï¼Œå› æ­¤ä¸€æ—¦ argv[1]çš„é•¿åº¦å¤§äº BUFSIZï¼Œå°±ä¼šå¼•èµ·ç¼“å†²æº¢å‡ºäº†ã€‚ ","date":"2022-02-07","objectID":"/strcpy/:2:0","tags":["c"],"title":"C è¯­è¨€å¸¸ç”¨åº“å‡½æ•°-strcpy","uri":"/strcpy/"},{"categories":["programming"],"content":"æ³¨æ„äº‹é¡¹ è¯·æŠ›å¼ƒ strcpyï¼Œç”¨ strncpy ä»£æ›¿ï¼Œæœ€å¥½ç”¨ strlcpyã€‚ ","date":"2022-02-07","objectID":"/strcpy/:3:0","tags":["c"],"title":"C è¯­è¨€å¸¸ç”¨åº“å‡½æ•°-strcpy","uri":"/strcpy/"},{"categories":["programming"],"content":"å‡½æ•°åŸå‹ #include \u003cstdio.h\u003e int sscanf(const char *str, const char *format, ...); è¿™é‡Œ format å¯ä»¥æ˜¯ä¸€ä¸ªæˆ–è€…å¤šä¸ª { %[*][width][{h|l|I64|L}]type | ' ' | '\\t' | '\\n' | é%ç¬¦å· } å…¶ä¸­ ç¬¦å· è¯´æ˜ * æ·»åŠ åˆ™è¡¨ç¤ºæ»¡è¶³æ¡ä»¶çš„è¢«è¿‡æ»¤ width è¡¨ç¤ºå®½åº¦ h è¡¨ç¤ºå•å­—èŠ‚ l è¡¨ç¤ºåŒå­—èŠ‚ L è¡¨ç¤º 4 ä¸ªå­—èŠ‚ I64 è¡¨ç¤º 8 ä¸ªå­—èŠ‚ type å¦‚ s, d ä¹‹ç±»ï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²ç­‰ ","date":"2022-02-05","objectID":"/sscanf/:1:0","tags":["c"],"title":"Cè¯­è¨€å¸¸ç”¨åº“å‡½æ•°-sscanf","uri":"/sscanf/"},{"categories":["programming"],"content":"ç”¨æ³•åˆ†æ ","date":"2022-02-05","objectID":"/sscanf/:2:0","tags":["c"],"title":"Cè¯­è¨€å¸¸ç”¨åº“å‡½æ•°-sscanf","uri":"/sscanf/"},{"categories":["programming"],"content":"åŸºæœ¬ç”¨æ³• sscanf ä¸€èˆ¬ç”¨æ¥ä»ä¸€ä¸ª ascii å­—ç¬¦ä¸²ä¸­è¯»å–ä¸€äº›å€¼ï¼ŒåŸºæœ¬ç”¨æ³•å¾ˆç®€å•ã€‚ä¾‹å¦‚ #include \u003cstdio.h\u003e int main () { char *str = \"121000-13:00:20\"; int s[6]; int i; sscanf(str,\"%2d%2d%2d-%d:%d:%d\", \u0026s[0],\u0026s[1],\u0026s[2],\u0026s[3],\u0026s[4],\u0026s[5]); for(i = 0;i \u003c 6;i++) printf(\"s[%d] = %d\\n\",i,s[i]); return 0; } ","date":"2022-02-05","objectID":"/sscanf/:2:1","tags":["c"],"title":"Cè¯­è¨€å¸¸ç”¨åº“å‡½æ•°-sscanf","uri":"/sscanf/"},{"categories":["programming"],"content":"é«˜çº§ç”¨æ³• sscanf æä¾›äº†ç®€å•çš„æ¨¡å¼åŒ¹é…ï¼Œå…¶æ ¼å¼ä¸º %[] ã€‚ è¿™é‡Œçš„ [ ] å’Œæ­£åˆ™è¡¨è¾¾å¼ä¸­æ˜¯ä¸€æ ·çš„ï¼Œè¡¨ç¤ºåŒ¹é…å…¶ä¸­å‡ºç°çš„å­—ç¬¦åºåˆ—ã€‚å¦‚æœåœ¨ [ ] ä¸­ä½¿ç”¨ ^ ï¼Œåˆ™æ˜¯è¡¨ç¤ºå–åã€‚ ä¾‹å¦‚: [a-z] è¡¨ç¤ºå°å†™å­—æ¯åºåˆ—,å¦‚abc ... [^a-z] è¡¨ç¤ºé™¤å°å†™å­—æ¯çš„å­—ç¬¦ ä¸¾ä¾‹æ¥è¯´æ˜ #include \u003cstdio.h\u003e int main () { char *str = \"12:10:00-13:00:20\"; char s[6][3]; int i; sscanf(str,\"%[^:]:%[^:]:%[^-]-%[^:]:%[^:]:%[^:]\", s[0],s[1],s[2],s[3],s[4],s[5]); for(i = 0;i \u003c 6;i++) printf(\"s[%d] = %s\\n\",i,s[i]); return 0; } è¿™ä¸ªä¾‹å­åˆ†éš”å‡ºäº† str å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰æ•°å­—ã€‚å…¶æ ¼å¼å­—ç¬¦ä¸²åˆ†æå¦‚ä¸‹ï¼š %[^:] è¡¨ç¤ºåŒ¹é…ä¸å« : çš„å­—ç¬¦ä¸²,æ‰€ä»¥ç¬¬ä¸€ä¸ª %[^:] å°±åŒ¹é…äº†æ•°å­—å­—ç¬¦ä¸² 12 ,ç¬¬äºŒä¸ªåˆ™åŒ¹é…äº† 10 ; åŒç†ï¼Œ %[^-] è¡¨ç¤ºåŒ¹é…ä¸å« - çš„å­—ç¬¦ä¸²,æ‰€ä»¥åŒ¹é…å­—ç¬¦ä¸² 13 ï¼›å…¶ä»–çš„å°±ä¸è¨€è€Œå¯“äº†ã€‚ è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ ¼å¼åŒ–å­—ä¸²å˜ä¸º %[0-9]:%[0-9]:%[0-9]-%[0-9]:%[0-9]:%[0-9] , å°†ä¼šå¦‚ä½•ï¼Ÿå˜¿å˜¿ï¼Œä¸€æ ·çš„ç»“æœã€‚å› ä¸º %[0-9] å°±åŒ¹é…äº†æ•°å­—ç»„æˆçš„å­—ç¬¦ä¸²ã€‚ ç›¸ä¿¡è¿™ä¸€ä¸ªä¾‹å­åº”è¯¥è¶³å¤Ÿè¯´æ˜é—®é¢˜ï¼Œå…·ä½“æƒ…å†µå…·ä½“åˆ†æï¼Œä¸»è¦è¿˜æ˜¯é å¤§å®¶æ´»å­¦æ´»ç”¨äº†ã€‚ å†ä¸¾ä¸€ä¸ªå¤æ‚ç‚¹çš„ä¾‹å­ï¼Œä¾›å‚è€ƒï¼š #include \u003cstdio.h\u003e /* è·å–/å’Œ@ä¹‹é—´çš„å­—ç¬¦ä¸² */ int main() { const char *s = \"iios/12DDWDFF@122\"; char buf[20]; sscanf(s, \"%*[^/]/%[^@]\", buf); printf(\"%s\\n\", buf); return 0; } ","date":"2022-02-05","objectID":"/sscanf/:2:2","tags":["c"],"title":"Cè¯­è¨€å¸¸ç”¨åº“å‡½æ•°-sscanf","uri":"/sscanf/"},{"categories":["programming"],"content":"æ³¨æ„äº‹é¡¹ ","date":"2022-02-05","objectID":"/sscanf/:3:0","tags":["c"],"title":"Cè¯­è¨€å¸¸ç”¨åº“å‡½æ•°-sscanf","uri":"/sscanf/"},{"categories":["programming"],"content":"è¿”å›å€¼æ£€æŸ¥ æˆ‘ä»¬åœ¨ä½¿ç”¨ sscanf çš„æ—¶å€™å¾€å¾€ä¼šå¿½ç•¥å…¶è¿”å›å€¼ï¼Œäº‹å®ä¸Šï¼Œsscanf çš„è¿”å›å€¼æ˜¯å¾ˆæœ‰ç”¨å¤„çš„ã€‚ å½“åŒ¹é…å‡ºé”™çš„æ—¶å€™å…¶è¿”å›å€¼ä¸º EOFï¼Œå¦åˆ™è¿”å›åŒ¹é…æˆåŠŸçš„å‚æ•°ä¸ªæ•°ï¼Œå¦‚å¤Ÿä¸€ä¸ªéƒ½æ²¡åŒ¹é…åˆ°ï¼Œå°±æ˜¯ 0 äº†ã€‚ ä¸¾ä¾‹å­å¦‚ä¸‹ï¼š int main(int argc, char **argv) { int i = 0, j = 0, r; r = sscanf(argv[1], \"%d:%d\", \u0026i, \u0026j); printf(\"r = %d, i = %d, j = %d\\n\", r, i, j); return 0; } æ‰§è¡Œç»“æœå¦‚ä¸‹ $ ./main a r = 0, i = 0, j = 0 $ ./main 1 r = 1, i = 1, j = 0 $ ./main 1:2 r = 2, i = 1, j = 2 ","date":"2022-02-05","objectID":"/sscanf/:3:1","tags":["c"],"title":"Cè¯­è¨€å¸¸ç”¨åº“å‡½æ•°-sscanf","uri":"/sscanf/"},{"categories":["programming"],"content":"æº¢å‡ºé—®é¢˜ sscanf æœ€ä¸ºäººè¯Ÿç—…çš„åœ°æ–¹ï¼Œæ˜¯å¾ˆå®¹æ˜“å‡ºç°ç¼“å†²åŒºæº¢å‡ºé”™è¯¯ã€‚å®é™…ä¸Š sscanf æ˜¯å¯ä»¥é¿å…å‡ºç°ç¼“å†²åŒºæº¢å‡ºçš„ï¼Œåªè¦åœ¨ä¹¦å†™ä»»ä½•å­—ç¬¦ä¸²è§£æçš„æ ¼å¼æ—¶ï¼Œæ³¨æ„åŠ ä¸Šå…¶ç¼“å†²åŒºå°ºå¯¸çš„é™åˆ¶ã€‚å¦‚ #include \u003cstdio.h\u003e int main() { char match[8] = \"12345678\"; // fill with values to test with terminating // null character int len = sizeof(match)-1; const char *input = \"hello world\"; char format[16]; snprintf(format, sizeof(format), \"%%%d[a-z ]\", len); printf(\"format = %s\\n\", format); sscanf(input, format, match); printf(\"match = %s\\n\", match); } è¾“å‡ºä¸º format = %7[a-z ] match = hello w è¿™é‡Œ format é‡Œé¢çš„ %7 å°±é™å®šäº†æ‹·è´è¿‡æ¥çš„å­—ç¬¦ä¸²é•¿åº¦ä¸º 7 ï¼Œä¹Ÿå°±æ˜¯ match çš„æ€»é•¿å‡ä¸€ã€‚ æœ€åä¸€ä¸ªå­—ç¬¦ç•™ç»™å­—ç¬¦ä¸²çš„ç»“å°¾å­—ç¬¦ \\0 ï¼Œsscanf ä¼šè‡ªåŠ¨æ·»åŠ ã€‚ ","date":"2022-02-05","objectID":"/sscanf/:3:2","tags":["c"],"title":"Cè¯­è¨€å¸¸ç”¨åº“å‡½æ•°-sscanf","uri":"/sscanf/"},{"categories":["study"],"content":"æ¦‚è¿° ç”±äºæ–°å…¬å¸çš„å›½å¤–ä¸šåŠ¡å æ¯”å¾ˆé«˜ï¼Œå› æ­¤è¦æ±‚æ‰˜ä¸šè¦è¿‡ 600 æ‰è¡Œã€‚æ‰€ä»¥å…¥èŒåå‰åå‚åŠ äº† 2 æ¬¡è€ƒè¯•ï¼Œåˆ†åˆ«ä¸º 2021.8.24 å’Œ 2022.1.16 æœˆä»½ã€‚ç¬¬ä¸€æ¬¡è€ƒäº† 560 åˆ†ï¼ˆ250/310ï¼‰ï¼Œç¬¬äºŒæ¬¡ 730 åˆ†ï¼ˆ350/380ï¼‰ã€‚è®°å½•è¿™ä»½æ–‡ä»¶çš„ç›®çš„ä¸»è¦æ˜¯åˆ†äº«ä¸‹è€ƒè¯•ç»éªŒï¼Œå¸®åŠ©è·Ÿæˆ‘æ°´å¹³ç±»ä¼¼çš„äººé€šè¿‡æ‰˜ä¸šçš„è€ƒè¯•ã€‚ ç¬¬ä¸€æ¬¡è€ƒè¯•åŸºæœ¬æ²¡åšä»€ä¹ˆå‡†å¤‡ï¼Œåªæ˜¯è€ƒå‰ç†Ÿæ‚‰äº†ä¸€ä¸‹é¢˜å‹ã€‚è€Œä»ç¬¬ä¸€æ¬¡è€ƒè¯•åˆ°ç¬¬äºŒæ¬¡è€ƒè¯•ï¼ŒæœŸé—´è™½ç„¶é—´éš”äº†å·®ä¸å¤š 5 ä¸ªæœˆçš„æ—¶é—´ï¼Œä½†çœŸæ­£ç”¨æ¥å¤ä¹ çš„ä¹Ÿå°±å·®ä¸å¤šæœ€åä¸€ä¸ªå¤šæœˆã€‚å› ä¸ºç¬¬äºŒæ¬¡è€ƒè¯•å…¶å®æ˜¯ä¸´æ—¶å†³å®šçš„ï¼ŒåŸæœ¬çš„è®¡åˆ’æ˜¯ 2022 å¹´åæ‰å¼€å§‹å¤‡è€ƒã€‚æ‰€ä»¥è¿™ä¸ªåˆ†äº«æˆ‘è§‰å¾—å¯¹äºçŸ­æ—¶é—´å¤‡è€ƒçš„åŒå­¦æ›´æœ‰å¸®åŠ©ä¸€äº›ã€‚åºŸè¯å°±ä¸å¤šè¯´äº†ï¼Œæˆ‘ä»¬å¼€å§‹ã€‚ ","date":"2022-02-05","objectID":"/toeic_experience/:1:0","tags":["english"],"title":"æ‰˜ä¸šè€ƒè¯•ç»éªŒåˆ†äº«","uri":"/toeic_experience/"},{"categories":["study"],"content":"å¤‡è€ƒç»éªŒ ","date":"2022-02-05","objectID":"/toeic_experience/:2:0","tags":["english"],"title":"æ‰˜ä¸šè€ƒè¯•ç»éªŒåˆ†äº«","uri":"/toeic_experience/"},{"categories":["study"],"content":"åŸåˆ™ æ‹¿å¥½ä½ æ‡‚çš„åˆ†æ•°ï¼Œæ¨¡ç³Šçš„æˆ–è€…ä¸æ‡‚çš„ä¸è¦æ‹æˆ˜ã€‚æŒæ¡å¥½æ—¶é—´ï¼Œé¢˜ç›®æœ€å¤šè¿‡ 2 éï¼Œ2éäº†è¿˜ä¸ç¡®å®šï¼Œç›´æ¥çŒœï¼Œä¸è¦é€—ç•™ æ¯ä¸€é¢˜éƒ½è¦å½“æ—¶å°±å¡«ï¼Œä¸æ‡‚å°±çŒœï¼Œä¸è¦ç•™ç©ºï¼Œå› ä¸ºä½ åé¢æ²¡æ—¶é—´å›å¤´å¡« ","date":"2022-02-05","objectID":"/toeic_experience/:2:1","tags":["english"],"title":"æ‰˜ä¸šè€ƒè¯•ç»éªŒåˆ†äº«","uri":"/toeic_experience/"},{"categories":["study"],"content":"å‡†å¤‡å·¥ä½œ è€ƒè¯•å‰å…ˆå‡†å¤‡å¥½ 2 æ”¯é“…ç¬”å’Œæ©¡çš®ã€‚é“…ç¬”è‡ªå·±è€ƒå‰å…ˆè¯•å¥½ï¼Œç¡®è®¤æ¶‚åœ†å½¢çš„ç­”é¢˜é¡¹é¡ºæ»‘ã€‚è¿™ç‚¹æˆ‘è®¤ä¸ºå¾ˆé‡è¦ï¼Œå› ä¸ºå¦‚æœå‰Šçš„å¤ªå°–äº†ï¼Œæ¶‚èµ·æ¥æµªè´¹æ—¶é—´ï¼Œæ“¦èµ·æ¥åˆä¸æ–¹ä¾¿ã€‚ è€ƒè¯•å…¨ç¨‹éƒ½æ˜¯æ’­æ”¾çš„å½•éŸ³æŒ‡å¯¼è€ƒè¯•è¿‡ç¨‹ï¼Œå…¨è‹±æ–‡ï¼Œå»ºè®®æ²¡è€ƒè¿‡çš„åŒå­¦å…ˆåšä¸‹æ¨¡æ‹Ÿé¢˜ç†Ÿæ‚‰ä¸€ä¸‹æ—ç™½çš„å†…å®¹ã€‚è¿™æ ·ä½ å¯ä»¥çŸ¥é“ï¼Œå“ªäº›æ—¶é—´æ˜¯ä½ å¯ä»¥åˆ©ç”¨èµ·æ¥çœ‹é¢˜æˆ–è€…ä¼‘æ¯ã€‚ è¿›å…¥è€ƒåœºåï¼Œæ¡Œå­ä¸Šä¼šæ”¾æœ‰å†™æœ‰å‡†è€ƒè¯å·çš„çº¸æ¡å’Œä½ çš„ç­”é¢˜å¡ã€‚ç­”é¢˜å¡ä¸Šçš„æ­£é¢ä»¥åŠåé¢çš„ä¸ŠåŠéƒ¨åˆ†éƒ½æ˜¯ä¸€äº›ä¸ªäººä¿¡æ¯ä»¥åŠæ‰˜ä¸šå®˜æ–¹çš„è°ƒæŸ¥ä¿¡æ¯ï¼Œç„¶åæ‰æ˜¯é¢˜ç›®ç­”æ¡ˆã€‚è€ƒå‰ï¼Œä¼šæœ‰ä¸“é—¨çš„æ—¶é—´ï¼ˆå¤§çº¦ 15 åˆ†é’Ÿï¼‰å½•éŸ³æŒ‡å¯¼ä¸€æ­¥æ­¥çš„å¡«å†™é™¤ç­”é¢˜ä»¥å¤–çš„éƒ¨åˆ†ã€‚ä½†æ˜¯æˆ‘å»ºè®®å¯ä»¥ä¹˜ç­‰å¾…çš„æ—¶é—´å…ˆæŠŠç­”é¢˜å¡å¡«èµ·æ¥ï¼Œå› ä¸ºç­”é¢˜å¡ä¸Šæœ‰ä¸€é¡¹éœ€è¦æŠ„å†™å£°æ˜ï¼Œå¯¹äºä¹¦å†™æ…¢çš„åŒå­¦æ¥è¯´è¿˜æ˜¯æœ‰ç‚¹ç´§çš„ï¼Œä¸ºä¸å½±å“è€ƒè¯•æƒ…ç»ªï¼Œå»ºè®®æå‰å†™å¥½ã€‚è¿™æ—¶å€™ç›‘è€ƒè€å¸ˆä¸€èˆ¬æ˜¯ä¸ä¼šç®¡çš„ã€‚è™½ç„¶ç¬¬ä¸€æ¬¡è€ƒè¯•çš„æ—¶å€™ï¼Œè€å¸ˆè¯´å…ˆä¸è¦å¡«å†™ï¼Œä½†æ˜¯å¡«äº†ä¹Ÿæ²¡å…³ç³»ã€‚ æˆ‘å‚åŠ çš„ 2 æ¬¡è€ƒè¯•ï¼Œä¸€æ¬¡åœ¨å…¬å¸ï¼Œä¸€æ¬¡æ˜¯åœ¨å¤–é¢ï¼ˆæ‰˜ä¸šæŒ‡å®šçš„ç¤¾ä¼šè€ƒè¯•åœ°ç‚¹ï¼ŒæŸæ—…åº—çš„å®´ä¼šå…ï¼‰ã€‚è€ƒè¯•ç¯å¢ƒéƒ½å¾ˆå®‰é™ï¼ŒåŸºæœ¬ä¸ä¼šå‡ºç°ä¸€äº›äººæåˆ°çš„å¤–ç•Œå£°éŸ³å¹²æ‰°ä»€ä¹ˆçš„é—®é¢˜ï¼Œæ‰€ä»¥è¿™ç‚¹ä¸ç”¨æ‹…å¿ƒã€‚ ","date":"2022-02-05","objectID":"/toeic_experience/:2:2","tags":["english"],"title":"æ‰˜ä¸šè€ƒè¯•ç»éªŒåˆ†äº«","uri":"/toeic_experience/"},{"categories":["study"],"content":"æ—¶é—´åˆ†é… æ‰˜ä¸šé¢˜é‡å¾ˆå¤§ï¼Œå¦‚æœä¸ç†Ÿæ‚‰ï¼Œæ ¹æœ¬æ˜¯æ¥ä¸åŠåšå®Œçš„ã€‚æ¯”å¦‚æˆ‘ç¬¬ä¸€æ¬¡ï¼Œå°±æ•´æ•´ç•™ä¸‹æ¥ 5 å¤§é¢˜çš„é˜…è¯»æ²¡æœ‰å®Œæˆã€‚è€Œç¬¬äºŒæ¬¡ï¼Œç»è¿‡äº†ç»ƒä¹ ä»¥åä¹Ÿè¿˜æ˜¯çœä¸‹äº†æœ€å 3 é“é€‰æ‹©é¢˜æ²¡çœ‹ï¼Œç»“æœæ˜¯ä¹±å¡«çš„ã€‚æ‰€ä»¥æ—¶é—´åˆ†é…å¾ˆé‡è¦ã€‚ æ€»æ—¶é—´æ˜¯ 120 åˆ†é’Ÿï¼Œå…¶ä¸­ 45 åˆ†é’Ÿå¬åŠ›ï¼Œ75 åˆ†é’Ÿé˜…è¯»ã€‚ å¬åŠ› å¬åŠ›å…¶å®æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå› ä¸ºéƒ½æ˜¯ä¸€é¢˜ä¸€é¢˜çš„è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ä»¥ä¸‹å‡ ç‚¹å…³äºç½‘ä¸Šä»‹ç»çš„è€ƒè¯•æŠ€å·§çš„ä½“ä¼š åˆ©ç”¨æ—ç™½çš„æ—¶é—´å…ˆçœ‹çœ‹åé¢è¦åšçš„é¢˜ç›®ï¼Œæ¯”å¦‚å›¾ç‰‡é¢˜çš„å›¾ç‰‡ï¼ŒçŸ­æ–‡é—®ç­”é¢˜çš„é—®é¢˜ä»¥åŠç­”æ¡ˆã€‚å› ä¸ºæ—ç™½çš„æ—¶é—´ä¸€èˆ¬éƒ½æ¯”è¾ƒé•¿ï¼Œæµªè´¹äº†æœ‰ç‚¹å¯æƒœï¼Œçœ‹çœ‹åé¢çš„å†…å®¹ä¹Ÿæ— å¦¨ï¼Œä½†æ˜¯ä¸è¦æŠ±å¤šå¤§æœŸå¾…ã€‚å› ä¸ºå¯¹æˆ‘è¿™æ ·çš„è‹±æ–‡åŸºç¡€ï¼Œå…¶å®çœ‹ä¸çœ‹å½±å“çœŸçš„ä¸å¤§ã€‚å¬åŠ›å¥½çš„åŒå­¦ä¸å¦¨ä½¿ç”¨ã€‚ åˆ©ç”¨ä¸Šä¸€é¢˜å‰©ä¸‹çš„æ—¶é—´é¢„å…ˆå®¡ä¸‹ä¸€é¢˜ã€‚è¿™ä¸ªå¯¹æˆ‘æ¥è¯´å°±å¤ªéš¾äº†ï¼Œå®é™…æ“ä½œä¸‹æ¥åŸºæœ¬æ²¡å•¥ç”¨å¤„ï¼Œåšå®Œä¸Šä¸€é¢˜ï¼ŒåŸºæœ¬ä¸å‰©å‡ ç§’äº†ï¼Œçœ‹ä¸€ä¸‹é¢˜å¤ªè¿‡å‹‰å¼ºï¼Œåˆ«è´¹é‚£ä¸ªå¿ƒäº†ã€‚(äººå®¶çš„æ“ä½œæ˜¯åœ¨å¬çŸ­æ–‡çš„æ—¶å€™é¡ºä¾¿å°±æŠŠé—®é¢˜åšå®Œäº†ï¼ŒçŸ­æ–‡ç»“æŸè¯»é—®é¢˜çš„æ—¶å€™å°±è·³åˆ°ä¸‹ä¸€é¢˜å»çœ‹é—®é¢˜äº†ã€‚æˆ‘æ ¹æœ¬åšä¸åˆ°å¬çŸ­æ–‡çš„æ—¶å€™è¿˜å»ç­”é—®é¢˜ï¼Œä¸€åˆ†å¿ƒçŸ­æ–‡éƒ½å¬ä¸å®Œæ•´äº†) é˜…è¯» é˜…è¯»çš„ 75 åˆ†é’Ÿæ—¶é—´ï¼Œå»ºè®®è¿™æ ·åˆ†é…ï¼Œåœ¨ç»ƒä¹ ä¸­å°±é€šè¿‡å€’è®¡æ—¶æ¥ç†Ÿæ‚‰ã€‚ å¤§é¢˜ é¢˜å‹ é¢˜æ•° æ—¶é—´ 5 å¥å­å¡«ç©º 30 (101~130) 10 åˆ†é’Ÿ (20 ç§’ä¸€é¢˜) 6 çŸ­æ–‡å¡«ç©º 16 (131~146) 5 åˆ†é’Ÿ 7 å•ç¯‡é˜…è¯»(10 ç¯‡) 29ï¼ˆ147~175ï¼‰ 30 åˆ†é’Ÿ (3 åˆ†é’Ÿä¸€ç¯‡) 7 å¤šç¯‡é˜…è¯»(5 ç¯‡) 25 (176~200) 30 åˆ†é’Ÿï¼ˆ5 åˆ†é’Ÿä¸€ç¯‡ï¼‰ ","date":"2022-02-05","objectID":"/toeic_experience/:2:3","tags":["english"],"title":"æ‰˜ä¸šè€ƒè¯•ç»éªŒåˆ†äº«","uri":"/toeic_experience/"},{"categories":["study"],"content":"å…¶ä»– è¯æ±‡é‡ è¯æ±‡é‡ä¸æ˜¯ä¸€ä¸ªæœˆä¸¤ä¸ªæœˆå°±èƒ½æé«˜çš„ã€‚ä½†æ˜¯å¯¹äºæ‰˜ä¸šæ¥è¯´ï¼Œæˆ‘è§‰å¾—æœ€å¥½çš„æ–¹å¼æ˜¯åˆ·é¢˜ï¼Œç„¶åä»é¢˜ç›®ä¸­è®°å½•å•è¯ã€‚åªæ˜¯é’ˆå¯¹è¿™äº›ç”Ÿè¯æ¥è®°å¿†ï¼Œå¯ä»¥çŸ­æœŸå†…æé«˜æ‰˜ä¸šçš„æˆç»©ã€‚ å¬åŠ› è¯´å®è¯ï¼Œä¸¤æ¬¡è€ƒè¯•ï¼Œæˆ‘è‡ªæˆ‘è§‰å¾—å¬åŠ›å…¶å®æ²¡å¤šå°‘æé«˜ï¼Œè¿™ä¸ªç¡®å®æ˜¯ç¡¬å®åŠ›ï¼Œéœ€è¦ä¸æ–­çš„ç£¨è€³æœµæ‰è¡Œã€‚å¬åŠ›ä¸Šæˆ‘çš„å»ºè®®æ˜¯é’ˆå¯¹ Part1 å’Œ Part2 å¤šç»ƒä¹ ï¼Œå› ä¸ºè¿™ä¸¤é¡¹æ˜¯å¯ä»¥åœ¨çŸ­æœŸå†…æé«˜çš„ï¼Œè€Œ Part3 å’Œ Part4ï¼Œæœ‰æ—¶é—´å°±å¤šç»ƒå¤šå¬ï¼Œæ²¡æ—¶é—´ã€‚ã€‚ã€‚å°±è’™å§ï¼Œåæ­£æˆ‘ç¬¬äºŒæ¬¡è€ƒè¯• Part3 å’Œ Part4 çœŸæ­£å¬æ‡‚çš„å¾ˆå°‘ã€‚ å¦å¤–å‡ ä¸ªç›¸å…³çš„æŠ€å·§ä¾›å‚è€ƒ æœ‰çš„åŒå­¦è®°å¿†ä¸å¥½ï¼Œæ¯”å¦‚å¬åˆ°äº† A ä¸ç¡®å®šï¼Œå¬åˆ°äº† C åˆä¸ç¡®å®šï¼Œåˆ°å¬å®Œ D çš„æ—¶å€™å¿˜è®°äº† B æ˜¯å¯¹çš„è¿˜æ˜¯é”™çš„äº†ï¼ŒçŒœé¢˜çš„æ—¶å€™å°±ä¸çŸ¥é“è¯¥çŒœå“ªä¸ªäº†ã€‚è€ƒé¢˜æœ¬å’Œç­”é¢˜å¡ä¸Šéƒ½ä¸èƒ½åšè®°å·ï¼Œè¿™é‡Œæœ‰ä¸ªåŠæ³•ï¼Œå°±æ˜¯ç”¨æ‰‹æŒ‡æ¥è¡¨ç¤º ABCDï¼Œæ¯”å¦‚å·¦æ‰‹å¤§æ‹‡æŒ‡è¡¨ç¤º Aï¼Œé£ŸæŒ‡è¡¨ç¤º Bï¼Œä¾æ¬¡ç±»æ¨ã€‚æ¯ä¸€é¢˜è¯»å®Œï¼Œå°±ç”¨æ‰‹æŒ‡çš„çŠ¶æ€è¡¨ç¤ºæ˜¯å¦é”™è¯¯ã€‚æ¯”å¦‚å¦‚æœ A ç¡®å®šæ˜¯é”™çš„ï¼Œé‚£ä¹ˆå°±æŠŠå¤§æ‹‡æŒ‡å¼¯æ›²ï¼ŒBä¸ç¡®å®šé‚£å°±ä¿æŒç›´ç€ï¼ŒCé”™è¯¯é‚£å°±å¼¯æ›²ä¸­æŒ‡ï¼Œæœ€å D ä¹Ÿä¸ç¡®å®šï¼Œé‚£å°± BD é‡Œé¢çŒœã€‚ å¯¹äº Part2 ï¼Œå…³é”®å°±æ˜¯åœ¨äºå¬æ¸…æ¥šç¬¬ä¸€ä¸ªè¯ï¼Œ4W1Hï¼Œå³ Whatï¼Œ Whoï¼ŒWhereï¼ŒWhen ä»¥åŠ How ã€‚å¬æ¸…æ¥šäº†è¿™ 4 ä¸ªè¯å°±æœ‰ 80% ä»¥ä¸Šçš„æœºä¼šç­”å¯¹äº†ã€‚ é˜…è¯» å•å¥å¡«ç©ºä¸»è¦æ˜¯è€ƒ å•è¯/æ–‡æ³•/è¯æ€§ï¼Œæ‰€ä»¥å…ˆçŸ¥é“è€ƒç‚¹å¾ˆé‡è¦ã€‚å»ºè®®å…ˆçœ‹ç­”æ¡ˆï¼Œå†çœ‹é¢˜ã€‚è¿™æ ·æœ‰çš„é¢˜ç›®å¯èƒ½é©¬ä¸Šå°±èƒ½çŸ¥é“ç­”æ¡ˆäº†ï¼Œç”šè‡³éƒ½ä¸éœ€è¦çŸ¥é“å•è¯æ˜¯ä»€ä¹ˆæ„æ€ã€‚è¿™ç‚¹åˆ·é¢˜åè‡ªç„¶ä¼šæœ‰ä½“ä¼šã€‚ å•ç¯‡é˜…è¯»å’Œå¤šç¯‡é˜…è¯»ä¹Ÿæ˜¯å»ºè®®å…ˆçœ‹é¢˜å†åˆ°æ–‡ç« ä¸­å»æ‰¾ç­”æ¡ˆã€‚è¿™æ ·æ„Ÿè§‰è¿˜æ˜¯è¦å¿«å¾ˆå¤šã€‚å¹³æ—¶ç»ƒä¹ å¯ä»¥çœ‹ä¸€ä¸‹è‡ªå·±çš„é€Ÿåº¦ï¼Œå¦‚æœæ¥ä¸åŠï¼Œé‚£ä¹ˆå°±æ”¾å¼ƒé‚£äº›éœ€è¦çœ‹å…¨ç¯‡æ‰èƒ½æ‰¾ç­”æ¡ˆçš„é¢˜ç›®ã€‚ ","date":"2022-02-05","objectID":"/toeic_experience/:2:4","tags":["english"],"title":"æ‰˜ä¸šè€ƒè¯•ç»éªŒåˆ†äº«","uri":"/toeic_experience/"},{"categories":["study"],"content":"å¤‡è€ƒèµ„æ–™ å…ˆè¯´é‡ç‚¹ï¼Œå¤‡è€ƒèµ„æ–™é‡Œæˆ‘è§‰å¾—æœ€æœ‰ç”¨çš„å°±æ˜¯ä¹¦å’Œ abceedã€‚ ä¹¦ \r 2021 æ–°æ‰˜ä¸šæ¨¡æ‹Ÿé¢˜åº“ æˆ‘åªä¹°äº†è¿™ä¸€å¥—ã€‚å¹¶ä¸”åªåšäº† Part5-Part7 çš„é‚£ä¸¤æœ¬ã€‚å‰é¢çš„å¬åŠ›éƒ¨åˆ†æˆ‘éƒ½æ˜¯é æ‰‹æœºç«¯è½¯ä»¶ abceed æ¥ç†Ÿæ‚‰ã€‚ ç§»åŠ¨ç«¯ \r èƒŒå•è¯ï¼šä¸èƒŒå•è¯ + Anki æˆ‘èƒŒå•è¯çš„ä¸»åŠ›è½¯ä»¶æ˜¯ä¸èƒŒå•è¯ï¼Œæ‰€æœ‰ä»æ‰˜ä¸šåˆ·é¢˜è¿‡æ¥çš„ç”Ÿè¯éƒ½åŠ åˆ°ç”Ÿè¯æœ¬ï¼Œç„¶åæ¯å¤©æ—©ä¸ŠèŠ±åŠå°æ—¶å·¦å³æ—¶é—´å¤ä¹ ã€‚ Anki ä½œä¸ºä¸èƒŒå•è¯çš„è¡¥å……ã€‚å› ä¸ºä¸èƒŒå•è¯æœ‰äº›ç”Ÿè¯ä¼šæ‰¾ä¸åˆ°ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨è®°å½•åˆ° Anki ä¸Šè¿›è¡Œè®°å¿†ã€‚å½“ç„¶ï¼Œæ‰˜ä¸šä¸­é‡åˆ°çš„è¯­æ³•ï¼Œè¯ç»„ç­‰ç­‰ä¹Ÿéƒ½å¯ä»¥è®°å½•åœ¨ Anki ä¸Šã€‚ \r åˆ·é¢˜ï¼šabceed + QuizFun è€ƒå°šä¹ é¦–å…ˆæˆ‘ç”¨çš„æ˜¯ iphoneï¼Œè¿™ä¸¤ä¸ªè½¯ä»¶éƒ½éœ€è¦ç¾åŒºè´¦æˆ·æ‰èƒ½ä¸‹è½½ã€‚ abceed æ˜¯ä¸€ä¸ªæ—¥æœ¬äººå†™çš„è½¯ä»¶ï¼Œå¯ä»¥è¯´æ˜¯æ‰˜ä¸šæœ€å¥½çš„ç§»åŠ¨ç«¯è½¯ä»¶äº†ï¼Œç¼ºç‚¹æ˜¯æ”¶è´¹å’Œå…·ä½“è¯´æ˜æ–‡å­—ä¸ºæ—¥æ–‡ã€‚è½¯ä»¶å¯ä»¥å®šç›®æ ‡ï¼Œéšæ—¶åˆ·é¢˜ï¼Œå¹¶å³æ—¶è°ƒæ•´ä½ çš„æˆç»©ã€‚å……åˆ†çš„åˆ©ç”¨ç¢ç‰‡æ—¶é—´ç†Ÿæ‚‰é¢˜å‹ã€‚æˆ‘è§‰å¾—å¯¹äºå¬åŠ›éƒ¨åˆ†çš„ç»ƒä¹ å¾ˆæœ‰ç”¨å¤„ã€‚è€Œé˜…è¯»çš„éƒ¨åˆ†ï¼Œç”±äºæˆ‘ç”¨çš„æ˜¯æ‰‹æœºï¼Œå¾€å¾€çœ‹æ–‡ç« çš„æ—¶å€™ç”±äºæ˜¾ç¤ºä¸å…¨å¾—ç¿»é¡µï¼Œä¸¥é‡å½±å“äº†ä½“éªŒï¼Œæ‰€ä»¥é˜…è¯»éƒ¨åˆ†å¯¹æˆ‘çš„å¸®åŠ©åº”è¯¥ä¸»è¦è¿˜æ˜¯åœ¨äºç†Ÿæ‚‰é¢˜å‹å’Œæ”¶é›†ç”Ÿè¯ã€‚ç”¨ ipad åº”è¯¥ä¼šå¥½å¾ˆå¤šã€‚å»ºè®®å¦‚æœåŸºç¡€ä¸å¤ªå¥½çš„åŒå­¦èŠ± 3 ä¸ªæœˆå·¦å³çš„æ—¶é—´å¤‡è€ƒï¼Œå¯ä»¥ä¹° 3 ä¸ªæœˆï¼Œå¤§æ¦‚äººæ°‘å¸ 400 ä¸åˆ°ï¼Œæ¯”å•æœˆä¹°çš„ä¾¿å®œå¾ˆå¤šã€‚ è€ƒå°šä¹ åˆ™æ˜¯å°æ¹¾äººåšçš„ä¸€ä¸ªè½¯ä»¶ï¼Œåœ¨å°æ¹¾æ‰˜ä¸šå«åšå¤šç›Šï¼Œæ‰€ä»¥æœè€ƒé¢˜çš„æ—¶å€™ç›´æ¥æœå¤šç›Šå°±å¯ä»¥äº†ã€‚è¿™ä¸ªè½¯ä»¶ä¹Ÿæ˜¯æ”¶è´¹çš„ï¼Œä½†æ˜¯æœ‰ä¸€äº›å…è´¹çš„å¯ä»¥ç”¨æ¥ç»ƒä¹ ã€‚è¿™ä¸ªè½¯ä»¶æˆ‘æ˜¯åæ¥æ‰çŸ¥é“çš„ï¼Œæ‰€ä»¥åªæ˜¯ä½œä¸ºä¸€ä¸ªè¡¥å……ä½¿ç”¨ã€‚å®ƒæ¯” abceed å¥½çš„åœ°æ–¹åœ¨äºéƒ½æ˜¯ä¸­æ–‡è§£æï¼Œä¸å¥½çš„åœ°æ–¹åœ¨äºé¢˜ç›®æœ‰äº›è€ï¼Œæ„Ÿè§‰éš¾åº¦ç›¸æ¯”å®é™…è€ƒè¯•åé«˜ã€‚ ç”µè„‘ç«¯ æˆ‘ç¬¬ä¸€æ¬¡è€ƒè¯•å‰åœ¨æ·˜å®ä¹°äº†ä¸€ä¸ªæ‰˜ä¸šçš„è½¯ä»¶ï¼Œå¯ä»¥åšæ¨¡æ‹Ÿè¯•é¢˜ã€‚å¤§æ¦‚ 10 å‡ å¥—è¯•å·ï¼Œè€Œä¸”æ¯ä¸ªéƒ½æœ‰è§£æï¼Œä¼¼ä¹å¾ˆä¸é”™ã€‚ä½†æ˜¯è¿™ä¸ªè½¯ä»¶æ˜¯åŸºäºå¤§å±å¹•è®¾è®¡çš„ï¼Œåˆ†è¾¨ç‡éœ€è¦å¾ˆé«˜ï¼ˆ1920x1080ï¼‰æ‰èƒ½æ¸…æ™°æ˜¾ç¤ºã€‚è€Œæˆ‘çš„æœºå™¨åˆ†è¾¨ç‡éƒ½æ¯”è¾ƒä½ï¼ˆç©·ï¼Œè€ç¬”è®°æœ¬ :( ï¼‰ã€‚æ‰€ä»¥ä½“éªŒä¸€ç›´å¾ˆå·®ï¼Œä¹Ÿå°±æ²¡æ€ä¹ˆç”¨ã€‚æˆ‘æŠŠè½¯ä»¶è£…åœ¨äº†è™šæ‹Ÿæœºäº†ï¼Œéšä¾¿æ‹‰åˆ°å“ªå°æœºå™¨éƒ½èƒ½ç”¨ï¼Œè„±ç¦»äº† license çš„é™åˆ¶ã€‚æœ‰éœ€è¦çš„åŒå­¦å¯ä»¥è·Ÿæˆ‘ç´¢å–ã€‚ å¦å¤–å°±æ˜¯ç¬¬äºŒæ¬¡è€ƒè¯•å‰å…¬å¸æä¾›çš„æ‰˜ä¸šå®˜æ–¹çš„å¤ä¹ è¯¾ç¨‹äº†ï¼ˆoffical learning and preparation courseï¼‰ã€‚è¿™é‡Œè¦ç»™å…¬å¸çš„ç¦åˆ©ç‚¹èµã€‚è¿™ä¸ªè¯¾ç¨‹æˆ‘åšäº†å¤§æ¦‚ä¸€åŠçš„æ ·å­ï¼Œä¹‹æ‰€ä»¥æ²¡æœ‰å¥½å¥½çš„åšå®Œï¼Œä¸»è¦åŸå› è¿˜æ˜¯åªæœ‰é¢˜ç›®å’Œç­”æ¡ˆï¼Œæ²¡æœ‰è§£æã€‚æœ‰çš„æ—¶å€™åšé”™äº†ï¼Œä¹Ÿä¸çŸ¥é“é”™åœ¨å“ªé‡Œã€‚ ","date":"2022-02-05","objectID":"/toeic_experience/:2:5","tags":["english"],"title":"æ‰˜ä¸šè€ƒè¯•ç»éªŒåˆ†äº«","uri":"/toeic_experience/"},{"categories":["study"],"content":"é™„å½• ","date":"2022-02-05","objectID":"/toeic_experience/:3:0","tags":["english"],"title":"æ‰˜ä¸šè€ƒè¯•ç»éªŒåˆ†äº«","uri":"/toeic_experience/"},{"categories":["study"],"content":"ç­”é¢˜å¡ä¸Šçš„ä¸ªäººä¿¡æ¯ EDUCATION BACKGROUND - Major en ch Liberal arts äººæ–‡å­¦ç§‘ï¼Œæ¯”å¦‚å“²å­¦ Social studies/law ç¤¾ä¼šå­¦ï¼Œæ³•å­¦ Accounting/business/economics/finance/marketing/trading è´¢åŠ¡/é‡‘è/è´¸æ˜“â€¦ Sciences (agriculture, computer, mathematics, physic) ç§‘å­¦ Health (medicine, nursing, pharmacy, public health) å¥åº·å­¦ Engineering/architecture å·¥ç¨‹æ¶æ„ Other/none å…¶ä»– EDUCATION BACKGROUND - Dgree en ch Primary school å°å­¦ Junior high school åˆä¸­ High school (Secondary school) é«˜ä¸­ï¼ˆä¸­å­¦ï¼‰ vocational/technical high school èŒä¸š/æŠ€æœ¯é«˜ä¸­ 3-Years college 3 å¹´åˆ¶å¤§å­¦ Community/Junior college (Associate degree) ç¤¾åŒº/å¤§ä¸“ï¼ˆå‰¯å­¦å£«å­¦ä½ Undergraduate/bacheiorâ€™s degree æœ¬ç§‘/å­¦å£«å­¦ä½ Graduate/Masterâ€™s/doctoral degree ç ”ç©¶ç”Ÿ/ç¡•å£«/åšå£«å­¦ä½ Language institution è¯­è¨€æœºæ„ Other å…¶ä»– ","date":"2022-02-05","objectID":"/toeic_experience/:3:1","tags":["english"],"title":"æ‰˜ä¸šè€ƒè¯•ç»éªŒåˆ†äº«","uri":"/toeic_experience/"},{"categories":["programming"],"content":"å‡½æ•°åŸå‹ #include \u003cstdio.h\u003e/* å‡½æ•°è¯´æ˜: æœ€å¤šä»æºä¸²ä¸­æ‹·è´sizeï¼1ä¸ªå­—ç¬¦åˆ°ç›®æ ‡ä¸²ä¸­ï¼Œç„¶åå†åœ¨åé¢åŠ ä¸€ä¸ª0ã€‚æ‰€ ä»¥å¦‚æœç›®æ ‡ä¸²çš„å¤§å°ä¸ºsizeçš„è¯ï¼Œå°†ä¸ä¼šæº¢å‡ºã€‚ å‡½æ•°è¿”å›å€¼: è‹¥æˆåŠŸåˆ™è¿”å›å­˜å…¥æ•°ç»„çš„å­—ç¬¦æ•°ï¼Œè‹¥ç¼–ç å‡ºé”™åˆ™è¿”å›è´Ÿå€¼ã€‚ */ int snprintf(char *str, size_t size, const char *format, ...); ","date":"2022-02-05","objectID":"/snprintf/:1:0","tags":["c"],"title":"C è¯­è¨€å¸¸ç”¨åº“å‡½æ•°-snprintf","uri":"/snprintf/"},{"categories":["programming"],"content":"ç”¨æ³•åˆ†æ snprintf å’Œ sprintf ä¸åŒçš„æ˜¯ï¼Œå½“ç¼“å†²åŒºä¸å¤Ÿç”¨æ—¶ï¼Œsnprintf ä¼šè¿”å›ä¸€ä¸ªå¤§äºç­‰äº n çš„å€¼ï¼Œå‡ºé”™æ—¶è¿”å›ä¸€ä¸ªè´Ÿå€¼ã€‚å› æ­¤ï¼Œå½“è¿”å›å€¼æ˜¯ä¸€ä¸ªä¸å¤§äº n-1 çš„éè´Ÿå€¼æ—¶ï¼Œå®ƒå¯ä»¥ä¿è¯ç¼“å†²åŒºæ˜¯ä»¥ NUL ç»“å°¾ã€‚ snprintf çš„æ­£ç¡®ç”¨æ³•: #include \u003cstdio.h\u003e #define BUFSIZ 16 int main(int argc,char **argv) { char buf[BUFSIZ]; /* æ³¨æ„è¿™é‡Œé•¿åº¦ä¸éœ€è¦ç”¨sizeof(buf)-1ï¼Œå› ä¸ºsnprintfåªä¼šæ‹·è´size-1ä¸ªå­—èŠ‚ï¼Œ * å¹¶è‡ªå·±åŠ ä¸ŠNULLç»“å°¾ */ snprintf(buf, sizeof(buf), \"%s\", argv[1]); return 0; } ","date":"2022-02-05","objectID":"/snprintf/:2:0","tags":["c"],"title":"C è¯­è¨€å¸¸ç”¨åº“å‡½æ•°-snprintf","uri":"/snprintf/"},{"categories":["programming"],"content":"æ³¨æ„äº‹é¡¹ ä¸ç®¡æ˜¯ sprintf è¿˜æ˜¯ snprintfï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™å¿…é¡»æ³¨æ„è¢«æ‹·è´çš„å­—ä¸²äºä½œä¸ºå‚æ•°çš„å­—ä¸²ä¸èƒ½ç›¸åŒï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´ä¸å¯é¢„çŸ¥çš„è¿”å›å€¼ã€‚ä¾‹å¦‚ï¼š #include \u003cstdio.h\u003e int main(int argc, char **argv) { char str[16] = \"hello\"; snprintf(str, sizeof(str), \"%s-%d\", str, 1); printf(\"%s\\n\", str); return 0; } å‚è€ƒ è¿™ä»½èµ„æ–™ If copying takes place between objects that overlap as a result of a call to sprintf() or snprintf(), the results are undefined. ","date":"2022-02-05","objectID":"/snprintf/:3:0","tags":["c"],"title":"C è¯­è¨€å¸¸ç”¨åº“å‡½æ•°-snprintf","uri":"/snprintf/"}]